/*! MathLib v0.3.5 MathLib.de | MathLib.de/en/license */
var __extends=this.__extends||function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c},MathLib;(function(a){a.version="0.3.5",a.apery=1.2020569031595942,a.e=Math.E,a.epsilon=Number.EPSILON||function(){var a,b;for(a=1;1+a!==1;a=a/2)b=a;return b}(),a.eulerMascheroni=.5772156649015329,a.goldenRatio=1.618033988749895,a.pi=Math.PI;var b={array:Object.getPrototypeOf([]),func:Object.getPrototypeOf(function(){}),object:Object.getPrototypeOf({})},c="__proto__",d=function(a){var b=[];return a.forEach(function(a){Array.isArray(a)?b=b.concat(d(a)):b.push(a)}),b};a.prototypes=b,a.extend=function(b,c,d,e){e=e||{enumerable:!0};var f=a[b]||a;Object.defineProperty(f,c,{value:d,writable:e.writable,enumerable:e.enumerable,configurable:e.configurable})},a.extendPrototype=function(a,c,d,e){e=e||{enumerable:!0},Object.defineProperty(b[a],c,{value:d,writable:e.writable,enumerable:e.enumerable,configurable:e.configurable})};var e=function(){function b(a){this.type="MathML";var b=new DOMParser,c,d;typeof a!="string"&&(a=a.toContentMathML()),a=a.replace(/\n/g,""),a=a.replace(/((?!cs)[^>]{2})>(\s)*</g,"$1><"),a=a.replace(/&(\w*);/g,"#$1;"),c=b.parseFromString(a,"application/xml");var e,f=null,g=[];e=function(a){var b={},c,d;if(a.attributes)for(c=0,d=a.attributes.length;c<d;c++)b[a.attributes[c].name]=a.attributes[c].value;var h=Object.create({},{attributes:{value:b},nodeName:{value:a.nodeName},parentNode:{value:g[g.length-1]},prevNode:{value:f}});f&&(f.nextNode=h),f=h,g.push(h),h.childNodes=Array.prototype.slice.call(a.childNodes).map(e),g.pop();var i=function(a){var b="",c;for(c in a.attributes)a.attributes.hasOwnProperty(c)&&(b+=" "+c+'="'+a.attributes[c]+'"');return b};h.childNodes.length!==0?h.innerMathML=h.childNodes.reduce(function(a,b,c,d){return a+b.outerMathML},""):h.innerMathML="",h.childNodes.length===0?h.nodeName==="#text"?h.outerMathML=a.textContent.replace(/#(\w*);/g,"&$1;"):h.outerMathML="<"+h.nodeName+i(h)+"/>":h.outerMathML="<"+h.nodeName+i(h)+">"+h.innerMathML+"</"+h.nodeName+">";if(h.nodeName==="lambda"){h.bvars=[];for(c=0,d=h.childNodes.length;c<d;c++)h.childNodes[c].nodeName==="bvar"?h.bvars.push(h.childNodes[c].childNodes[0].innerMathML):h.childNodes[c].nodeName==="domainofapplication"?h.domainofapplication=h.childNodes[c]:h.childNodes[c].nodeName==="apply"&&(h.apply=h.childNodes[c])}return h},d=e(c.childNodes[0]),this.attributes=d.attributes,this.childNodes=d.childNodes,this.innerMathML=d.innerMathML,this.outerMathML=d.outerMathML,this.nodeName=d.nodeName,this.nextNode=d.nextNode,this.parentNode=null,this.prevNode=null}return b.isSupported=function(){var a=!1,b,c,d;return document.createElementNS&&(b="http://www.w3.org/1998/Math/MathML",c=document.createElement("div"),c.style.position="absolute",d=c.appendChild(document.createElementNS(b,"math")).appendChild(document.createElementNS(b,"mfrac")),d.appendChild(document.createElementNS(b,"mi")).appendChild(document.createTextNode("xx")),d.appendChild(document.createElementNS(b,"mi")).appendChild(document.createTextNode("yy")),document.body.appendChild(c),a=c.offsetHeight>c.offsetWidth,document.body.removeChild(c)),a},b.prototype.loadMathJax=function(a){var b=document.createElement("script");b.type="text/javascript",b.src="http://cdn.mathjax.org/mathjax/latest/MathJax.js",a=a||'MathJax.Hub.Config({config: ["MMLorHTML.js"],jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML"],extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js"],TeX: {extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]}});',window.opera?b.innerHTML=a:b.text=a,document.getElementsByTagName("head")[0].appendChild(b)},b.prototype.parse=function(){var b,c,d,e,f,g,h,i,j,k,l=!1,m=[];return b={apply:function(b){var c=b.childNodes,d=c.shift(),e=d.nodeName,f={ident:"identity",power:"pow",rem:"mod",setdifference:"without"};e in f&&(e=f[e]);if(l){var g;return g=i(c[0]),g===undefined?a.functn(function(b){return a[e](b)},{contentMathMLString:'<math xmlns="http://www.w3.org/1998/Math/MathML"><lambda><bvar><ci>x</ci></bvar><domainofapplication><complexes/></domainofapplication>'+b.outerMathML+"</lambda></math>"}):a.functn(function(b){return a[e](g(b))},{contentMathMLString:b.outerMathML})}if(e in a)return c.length===1?a[e](i(c[0])):a[e].apply(null,c.map(i));var h=i(c.shift());return c.length===1?h[e](i(c[0])):h[e](c.map(i))},ci:function(b){return m.indexOf(b.innerMathML)===-1?a.MathML.variables[b.innerMathML]:a.functn(function(a){return a},{contentMathMLString:'<math xmlns="http://www.w3.org/1998/Math/MathML"><lambda><bvar><ci>x</ci></bvar><domainofapplication><complexes/></domainofapplication><apply><ident/><ci>x</ci></apply></lambda></math>'})},cn:function(b){var c=b.attributes.type?b.attributes.type:"number";if(c==="number")return+b.innerMathML;if(c==="complex-cartesian")return new a.Complex(+b.childNodes[0].outerMathML,+b.childNodes[2].outerMathML);if(c==="complex-polar")return a.Complex.polar(+b.childNodes[0].outerMathML,+b.childNodes[2].outerMathML)},cs:function(a){return a.innerMathML},lambda:function(b){var d,e,f,g,h;return m=m.concat(b.bvars),d=b.domainofapplication,c=b.apply,f=c.childNodes[0].nodeName,l=!0,h={ident:"identity",power:"pow",rem:"mod",setdifference:"without"},f in h&&(f=h[f]),g=i(c.childNodes.slice(1)),g[0]===undefined?a.functn(function(b){return a[f](b)},{contentMathMLString:b.outerMathML,domain:d}):a.functn(function(b){return a[f].apply(null,g.map(function(a){return typeof a=="function"?a(b):a}))},{contentMathMLString:b.outerMathML,domain:d})},math:function(a){return i(a.childNodes[0])},matrix:function(c){return new a.Matrix(c.childNodes.map(b.matrixrow))},matrixrow:function(a){return a.childNodes.map(i)},set:function(b){var c=b.attributes.type&&b.attributes.type==="multiset"?!0:!1;return new a.Set(b.childNodes.map(i),c)},"false":function(){return!1},"true":function(){return!0},exponentiale:function(){return a.e},imaginaryi:function(){return new a.Complex(0,1)},notanumber:function(){return NaN},pi:function(){return a.pi},eulergamma:function(){return a.eulerMascheroni},infinity:function(){return Infinity},vector:function(b){return new a.Vector(b.childNodes.map(i))}},i=function(a){return Array.isArray(a)?a.map(i):b[a.nodeName](a)},i(this)},b.prototype.toMathMLString=function(){var a={apply:function(b){var c=b.childNodes[0],d=b.childNodes.slice(1).map(function(b){return a[b.nodeName](b)}),e="";return c.nodeName==="plus"?e="<mrow>"+d.join("<mo>+</mo>")+"</mrow>":c.nodeName==="times"?e="<mrow>"+d.join("<mo>*</mo>")+"</mrow>":c.nodeName==="power"?e="<msup>"+d[0]+d[1]+"</msup>":e="<mrow><mi>"+c.nodeName+"</mi><mo>&af;</mo><mfenced>"+d.join("")+"</mfenced></mrow>",e},bvar:function(){return""},ci:function(a){return"<mi>"+a.innerMathML+"</mi>"},cn:function(a){return"<mn>"+a.innerMathML+"</mn>"},cs:function(a){return"<ms>"+a.innerMathML+"</ms>"},domainofapplication:function(){return""},lambda:function(b){return b.childNodes.reduce(function(b,c){return b+a[c.nodeName](c)},"")},"#text":function(a){return a.innerMathML}};return'<math xmlns="http://www.w3.org/1998/Math/MathML">'+a[this.childNodes[0].nodeName](this.childNodes[0])+"</math>"},b.prototype.toString=function(){return this.outerMathML},b.variables={},b.prototype.write=function(a,b){var c;document.getElementById(a).innerHTML="<math>"+b+"</math>",typeof MathJax!="undefined"&&(c=MathJax.Hub.getAllJax(a)[0],MathJax.Hub.Queue(["Typeset",MathJax.Hub,a]))},b}();a.MathML=e,b.functn=function(){},a.functn=function(d,e){e=e||{};var f=function(b){if(typeof b=="number")return d.apply("",arguments);if(b.type==="functn"){var c=f.contentMathML.childNodes[0].childNodes[0].childNodes[0].outerMathML,g=b.contentMathML.childNodes[0].childNodes[0].childNodes[0].outerMathML,h=b.contentMathML.childNodes[0].childNodes[2].outerMathML.replace("<bvar>"+g+"</bvar>",""),i=f.contentMathML.childNodes[0].childNodes[2].outerMathML.replace(c,h),j='<math xmlns="http://www.w3.org/1998/Math/MathML"><lambda><bvar>'+g+"</bvar><domainofapplication><complexes/></domainofapplication>"+i+"</lambda></math>";return a.functn(function(a){return d(b(a))},{contentMathMLString:j})}return typeof b=="function"?function(a){return d(b(a))}:b.type==="complex"?b[e.name].apply(b,Array.prototype.slice.call(arguments,1)):b[e.name]()};f[c]=b.functn;var g=e.contentMathMLString||"";return Object.defineProperties(f,{id:{value:e.name},contentMathML:{value:new a.MathML(g)}}),f},a.extendPrototype("functn","constructor",a.functn),a.extendPrototype("functn","type","functn"),a.extendPrototype("functn","draw",function(a,b){var c=[],d;for(d=-50;d<=50;d=Math.round((d+.01)*100)/100)c.push([d,this(d)]);return Array.isArray(a)?a.forEach(function(a){a.path(c,b)}):a.path(c,b),this});var f='<math xmlns="http://www.w3.org/1998/Math/MathML"><lambda><bvar><ci>x</ci></bvar><domainofapplication><complexes/></domainofapplication><apply><',g="/><ci>x</ci></apply></lambda></math>",h={abs:Math.abs,arccos:Math.acos,arccot:function(a){return 1.5707963267948966-Math.atan(a)},arccsc:function(a){return Math.asin(1/a)},arcosh:Math.acosh||function(a){return Math.log(a+Math.sqrt(a*a-1))},arcoth:function(a){return.5*Math.log((a+1)/(a-1))},arcsch:function(a){return Math.log((1+Math.sqrt(1+a*a))/a)},arcsec:function(a){return Math.acos(1/a)},arcsin:Math.asin,arctan:Math.atan,arsech:function(a){return Math.log((1+Math.sqrt(1-a*a))/a)},arsinh:Math.asinh||function(a){return Math.log(a+Math.sqrt(a*a+1))},artanh:Math.atanh||function(a){return.5*Math.log((1+a)/(1-a))},ceil:function(a){return a===0?a:Math.ceil(a)},floor:Math.floor,cos:Math.cos,cosh:Math.cosh||function(a){return(Math.exp(a)+Math.exp(-a))/2},cot:function(a){return a===0?1/a:Math.tan(1.5707963267948966-a)},coth:function(a){return(Math.exp(a)+Math.exp(-a))/(Math.exp(a)-Math.exp(-a))},csc:function(a){return 1/Math.sin(a)},csch:function(a){return 2/(Math.exp(a)-Math.exp(-a))},exp:function(a){return Math.exp(a)},inverse:function(a){return 1/a},sec:function(a){return 1/Math.cos(a)},sech:function(a){return 2/(Math.exp(a)+Math.exp(-a))},sin:Math.sin,sinh:Math.sinh||function(a){return(Math.exp(a)-Math.exp(-a))/2},tan:Math.tan,tanh:Math.tanh||function(a){return(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))}};for(var i in h)h.hasOwnProperty(i)&&a.extend("",i,a.functn(h[i],{name:i,contentMathMLString:f+i+g}));a.identity=a.functn(function(a){return a},{contentMathMLString:f+"ident"+g});var j={arctan2:Math.atan2,binomial:function(a,b){var c=1,d;if(b<0||a>0&&b>a)return 0;a<0&&(c=Math.pow(-1,b),a=b-a-1),b>a/2&&(b=a-b);for(d=1;d<=b;d++)c*=(a+1-d)/d;return c},cbrt:function(b){var c,d,e,f;if(b===0||b!==b||b===Infinity||b===-Infinity)return b;f=a.sign(b)*Math.pow(Math.abs(b),1/3);for(;;){c=Math.pow(f,3),d=c+b,e=f*(d+b)/(d+c);if(a.isZero(e-f))break;f=e}return e},conjugate:function(a){return a},copy:function(a){return a},degToRad:function(a){return a*.017453292519943295},digitsum:function(a){var b=0;while(a>9)b+=a%10,a=Math.floor(a/10);return b+a},divide:function(b,c){return a.times(b,a.inverse(c))},divisors:function(b){var c=b===1?[]:[1],d,e;for(d=2,e=b/2;d<=e;d++)b%d===0&&c.push(d);return c.push(b),a.set(c)},factor:function(b){var c=[],d;b=Math.abs(b);while(b%2===0)b=b/2,c.push(2);d=3;while(b!==1){while(b%d===0)b=b/d,c.push(d);d+=2}return new a.Set(c,!0)},factorial:function(a){var b=1,c;for(c=1;c<=a;c=c+1)b*=c;return b},fallingFactorial:function(a,b,c){var d=1,e;c=c||1;for(e=0;e<b;e++)d*=a-e*c;return d},fibonacci:function(b){return Math.floor(Math.pow(a.goldenRatio,b)/Math.sqrt(5))},hypot:function(b,c){var d,e,f;return arguments.length===1?Math.abs(b):(arguments.length>2&&(d=Array.prototype.slice.call(arguments),d.shift(),c=a.hypot.apply(null,d)),b=a.abs(b),c=a.abs(c),b===Infinity||c===Infinity?Infinity:b===0&&c===0?0:(e=Math.max(b,c),f=Math.min(b,c),e*Math.sqrt(1+Math.pow(f/e,2))))},hypot2:function(){var a=Array.prototype.slice.call(arguments);return a.some(function(a){return a===Infinity||a===-Infinity})?Infinity:a.reduce(function(a,b){return a+b*b},0)},isFinite:function(a){return Math.abs(a)<Infinity},isInt:function(a){return a%1===0},isNaN:function(a){return a!==a},isNegZero:function(a){return 1/a===-Infinity},isOne:function(b){return Math.abs(b-1)<a.epsilon},isPosZero:function(a){return 1/a===Infinity},isPrime:function(a){var b=Math.sqrt(a),c;if(a%1===0&&a>1){if(a===2)return!0;if(a%2===0)return!1;for(c=3;c<=b;c+=2)if(a%c===0)return!1;return!0}return!1},isReal:function(a){return!0},isZero:function(b){return Math.abs(b)<a.epsilon},lg:function(a){return Math.log(a)/Math.ln10},ln:Math.log,log:function(a,b){return arguments.length===1&&(b=a,a=10),Math.log(b)/Math.log(a)},minus:function(b,c){return a.plus(b,a.negative(c))},mod:function(a,b){var c=a%b;return c>=0?c:c+b},negative:function(a){return-a},pow:function(a,b){return a===1||a===-1&&(b===Infinity||b===-Infinity)?1:Math.pow(a,b)},radToDeg:function(a){return a*57.29577951308232},random:Math.random,risingFactorial:function(a,b,c){var d=1,e;c=c||1;for(e=0;e<b;e++)d*=a+e*c;return d},round:function(a){return a===0?a:Math.round(a)},root:function(a,b){return arguments.length===1?Math.sqrt(a):Math.pow(a,1/b)},sign:function(a){return a&&(a<0?-1:1)},sqrt:function(a){return a===0?0:Math.sqrt(a)},trunc:function(a,b){return a.toFixed(b||0)},toLaTeX:function(a,b){return b?(a<0?"-":"+")+Math.abs(a):(a<0?"-":"")+Math.abs(a)},toMathMLString:function(a,b){return b?"<mo>"+(a<0?"-":"+")+"</mo><mn>"+Math.abs(a)+"</mn>":(a<0?"<mo>-</mo>":"")+"<mn>"+Math.abs(a)+"</mn>"},toString:function(a,b){return b?(a<0?"-":"+")+Math.abs(a):(a<0?"-":"")+Math.abs(a)}};a.toContentMathMLString=function(a){return typeof a=="number"?"<cn>"+a+"</cn>":a.toContentMathML()},a.and=function(){return Array.prototype.slice.call(arguments).every(function(a){return!!a})},a.or=function(){return Array.prototype.slice.call(arguments).some(function(a){return!!a})},a.xor=function(){return Array.prototype.slice.call(arguments).reduce(function(a,b){return a+b})%2!==0},a.not=function(a){return!a},a.compare=function(b,c){return a.type(b)!==a.type(c)?a.sign(a.type(b).localeCompare(a.type(c))):typeof b=="number"?a.sign(b-c):typeof b=="string"?b.localeCompare(c):b.compare(c)},a.type=function(a){return a===null?"null":a===undefined?"undefined":a.type?a.type:a.constructor.name.toLowerCase()},a.is=function(b,c){do{if(a.type(b)===c)return!0;b=Object.getPrototypeOf(Object(b))}while(b);return!1};var k={arithMean:function(){return a.plus.apply(null,this)/this.length},gcd:function(){var b,c=this,d=function(a){return a!==b?a%b:a},e=function(a){return a!==0};c=c.filter(function(a){return a<0?(c.push(-a),!1):a!==0});while(c.length>1)b=a.min(c),c=c.map(d).filter(e);return c[0]||b},geoMean:function(){return a.root(a.times.apply(null,this),this.length)},harmonicMean:function(){return this.length/a.plus.apply(null,Array.prototype.map.call(this,a.inverse))},lcm:function(){return a.times(this)/a.gcd(this)},max:function(b){return b?this.sort(a.compare)[this.length-b]:Math.max.apply("Array",this)},min:function(b){return b?this.sort(a.compare)[b-1]:Math.min.apply("Array",this)}};a.plus=function(){return Array.prototype.slice.apply(arguments).reduce(function(b,c){var d,e,f,g;if(typeof b=="number"&&typeof c=="number")return b+c;if(b.type==="functn"||c.type==="functn"){f=b.type==="functn"?b.contentMathML.childNodes[0].apply.outerMathML:a.toContentMathMLString(b),g=c.type==="functn"?c.contentMathML.childNodes[0].apply.outerMathML:a.toContentMathMLString(c),d=b,e=c,b.type!=="functn"?d=function(){return b}:c.type!=="functn"&&(e=function(){return c});var h='<math xmlns="http://www.w3.org/1998/Math/MathML"><lambda><bvar><ci>x</ci></bvar><domainofapplication><complexes/></domainofapplication><apply><plus/>'+f+g+"</apply></lambda></math>";return a.functn(function(b){return a.plus(d(b),e(b))},{contentMathMLString:h})}if(typeof b=="object")return b.plus(c);if(typeof c=="object")return c.plus(b)})},a.isEqual=function(){return d(Array.prototype.slice.apply(arguments)).every(function(a,b,c){return a===c[0]?!0:typeof a=="number"&&typeof c[0]=="number"?Math.abs(a-c[0])<=3e-15:typeof a=="object"?a.isEqual(c[0]):typeof c[0]=="object"?c[0].isEqual(a):!1})},a.times=function(){return Array.prototype.slice.apply(arguments).reduce(function(b,c){var d,e,f,g;if(typeof b=="number"&&typeof c=="number")return b*c;if(b.type==="functn"||c.type==="functn"){f=b.type==="functn"?b.contentMathML.childNodes[0].apply.outerMathML:a.toContentMathMLString(b),g=c.type==="functn"?c.contentMathML.childNodes[0].apply.outerMathML:a.toContentMathMLString(c),d=b,e=c,b.type!=="functn"?d=function(){return b}:c.type!=="functn"&&(e=function(){return c});var h='<math xmlns="http://www.w3.org/1998/Math/MathML"><lambda><bvar><ci>x</ci></bvar><domainofapplication><complexes/></domainofapplication><apply><times/>'+f+g+"</apply></lambda></math>";return a.functn(function(b){return a.times(d(b),e(b))},{contentMathMLString:h})}if(typeof b=="object")return b.times(c);if(typeof c=="object")return c.times(b)})};var l=function(b,c){return function(d){return typeof d=="number"?b.apply("",arguments):typeof d=="function"?function(a){return b(d(a))}:d.type==="set"?a.set(d.map(b)):d.type==="complex"?d[c].apply(d,Array.prototype.slice.call(arguments,1)):Array.isArray(d)?d.map(b):d[c]()}},m=function(a,b){return function(){var b=Array.prototype.slice.call(arguments),c=b.shift();return a.apply(c,b)}},n,o;for(n in j)j.hasOwnProperty(n)&&(o=j[n],Object.defineProperty(a,n,{value:l(j[n],n)}));b.set=[];for(n in k)k.hasOwnProperty(n)&&(o=k[n],Object.defineProperty(a,n,{value:m(k[n],n)}),a.extendPrototype("set",n,function(b){return function(c){return a[b](this,c)}}(n)));a.extendPrototype("functn","toContentMathML",function(){return this.contentMathML}),a.extendPrototype("functn","toContentMathMLString",function(){return this.contentMathML.outerMathML}),a.extendPrototype("functn","toLaTeX",function(a){var b={apply:function(a){var c=a.childNodes[0],d=a.childNodes.slice(1).map(function(a){return b[a.nodeName](a)}),e="";return c.nodeName==="plus"?e=d.join("+"):c.nodeName==="times"?e=d.join("*"):c.nodeName==="power"?e=d[0]+"^{"+d[1]+"}":e="\\"+c.nodeName+"("+d.join(", ")+")",e},bvar:function(){return""},ci:function(b){return a||b.innerMathML},cn:function(a){return a.innerMathML},cs:function(a){return a.innerMathML},domainofapplication:function(){return""},lambda:function(a){return a.childNodes.reduce(function(a,c){return a+b[c.nodeName](c)},"")},"#text":function(a){return a.innerMathML}};return b[this.contentMathML.childNodes[0].nodeName](this.contentMathML.childNodes[0])}),a.extendPrototype("functn","toMathML",function(){return this.contentMathML.toMathML()}),a.extendPrototype("functn","toMathMLString",function(){return this.contentMathML.toMathMLString()}),a.extendPrototype("functn","toString",function(a){var b={apply:function(a){var c=a.childNodes[0],d=a.childNodes.slice(1).map(function(a){return b[a.nodeName](a)}),e="";return c.nodeName==="plus"?e=d.join("+"):c.nodeName==="times"?e=d.join("*"):c.nodeName==="power"?e=d[0]+"^"+d[1]:e=c.nodeName+"("+d.join(", ")+")",e},bvar:function(){return""},ci:function(b){return a||b.innerMathML},cn:function(a){return a.innerMathML},cs:function(a){return a.innerMathML},domainofapplication:function(){return""},lambda:function(a){return a.childNodes.reduce(function(a,c){return a+b[c.nodeName](c)},"")},"#text":function(a){return a.innerMathML}};return b[this.contentMathML.childNodes[0].nodeName](this.contentMathML.childNodes[0])}),b.screen={},a.screen=function(c,d){if(arguments.length===0)return Object.create(b.screen,{});var e=document.getElementById(c),f=Object.create(b.screen),g,h={axisType:"in",axisColor:"black",axisLineWidth:.05,background:"white",down:-5,drag:!1,fillColor:"rgba(0,255,0,0.1)",fillLeft:-5,fillRight:5,fontSize:10,gridAngle:Math.PI/6,gridColor:"#cccccc",gridLineWidth:.05,gridType:"cartesian",height:parseInt(e.getAttribute("height"),10),label:!0,labelColor:"black",labelFont:"Helvetica",labelFontSize:"16px",left:-5,pan:!0,plotColor:"blue",plotLineWidth:.05,right:5,stepSizeX:1,stepSizeY:1,state:"",up:5,width:parseInt(e.getAttribute("width"),10),zoom:!0,zoomSpeed:.2};for(var i in d)d.hasOwnProperty(i)&&(h[i]=d[i]);h.id=c,h.element=e,h.type=e.localName;for(var j in h)h.hasOwnProperty(j)&&Object.defineProperty(f,j,{value:h[j],enumerable:!0,writable:!0});var k=a.matrix([[f.width/((f.right-f.left)*f.stepSizeX),0,f.width/2],[0,-f.height/((f.up-f.down)*f.stepSizeY),f.height/2],[0,0,1]]);Object.defineProperty(f,"curTransformation",{get:function(){return k},set:function(a){k=a,f.applyTransformation()}}),Object.defineProperty(f,"origTransformation",{value:a.matrix([[f.width/((f.right-f.left)*f.stepSizeX),0,f.width/2],[0,-f.height/((f.up-f.down)*f.stepSizeY),f.height/2],[0,0,1]])}),Object.defineProperty(f,"curTranslateX",{get:function(){return f.curTransformation[0][2]},set:function(a){f.curTransformation[0][2]=a,f.applyTransformation()}}),Object.defineProperty(f,"curTranslateY",{get:function(){return f.curTransformation[1][2]},set:function(a){f.curTransformation[1][2]=a,f.applyTransformation()}}),Object.defineProperty(f,"origTranslateX",{get:function(){return f.origTransformation[0][2]},set:function(a){f.origTransformation[0][2]=a}}),Object.defineProperty(f,"origTranslateY",{get:function(){return f.origTransformation[1][2]},set:function(a){f.origTransformation[1][2]=a}}),Object.defineProperty(f,"curZoomX",{get:function(){return f.curTransformation[0][0]},set:function(a){f.curTransformation[0][0]=a,f.applyTransformation()}}),Object.defineProperty(f,"curZoomY",{get:function(){return f.curTransformation[1][1]},set:function(a){f.curTransformation[1][1]=a,f.applyTransformation()}}),Object.defineProperty(f,"origZoomX",{get:function(){return f.origTransformation[0][0]},set:function(a){f.origTransformation[0][0]=a}}),Object.defineProperty(f,"origZoomY",{get:function(){return f.origTransformation[1][1]},set:function(a){h.origTransformation[1][1]=a}}),f.screenWrapper=document.createElement("div"),f.screenWrapper.className="MathLib screenWrapper",e.parentNode.insertBefore(f.screenWrapper,e),f.screenWrapper.appendChild(e),f.contextmenuWrapper=document.createElement("div"),f.contextmenuWrapper.className="MathLib contextmenuWrapper",f.screenWrapper.appendChild(f.contextmenuWrapper),g=document.createElement("ul"),g.className="MathLib contextmenu",f.contextmenuWrapper.appendChild(g);var l=document.createElement("li");l.className="MathLib menuitem",l.innerHTML='<span>Position</span><span style="float: right; padding-right: 10px">❯</span>',l.onclick=function(){f.contextmenuWrapper.style.setProperty("display","none")},g.appendChild(l);var m=document.createElement("ul");m.className="MathLib contextmenu submenu",l.appendChild(m);var n=document.createElement("li");n.className="MathLib menuitem",n.onclick=function(){f.contextmenuWrapper.style.setProperty("display","none")},m.appendChild(n);var o=document.createElement("li");o.className="MathLib menuitem",o.onclick=function(){f.contextmenuWrapper.style.setProperty("display","none")},m.appendChild(o);var p=document.createElement("li");p.className="MathLib menuitem",p.innerHTML="Reset View",p.onclick=function(){f.resetView(),f.contextmenuWrapper.style.setProperty("display","none")},g.appendChild(p);if(document.webkitCancelFullScreen){var q=document.createElement("li");q.className="MathLib menuitem",q.innerHTML="View full screen",q.onclick=function(a){document.fullScreenElement&&document.fullScreenElement!==null||!document.mozFullScreen&&!document.webkitIsFullScreen?f.enterFullscreen():f.exitFullscreen(),f.contextmenuWrapper.style.setProperty("display","none")},g.appendChild(q);var r=function(a){document.fullScreenElement&&document.fullScreenElement!==null||!document.mozFullScreen&&!document.webkitIsFullScreen?(q.innerHTML="View Fullscreen",f.resize(f.width,f.height),f.curTranslateX=f.origTranslateX,f.curTranslateY=f.origTranslateY,f.redraw()):(q.innerHTML="Exit Fullscreen",f.resize(window.outerWidth,window.outerHeight),f.curTranslateX=window.outerWidth/2,f.curTranslateY=window.outerHeight/2,f.redraw())};document.webkitCancelFullScreen?f.screenWrapper.addEventListener("webkitfullscreenchange",r,!1):document.mozCancelFullScreen&&f.screenWrapper.addEventListener("mozfullscreenchange",r,!1)}return f},a.extendPrototype("screen","axis",function(a){var b,c,d,e;arguments.length===0||b===!0?(d={lineColor:this.axisColor,fillColor:"rgba(255, 255, 255, 0)",layer:"back",lineWidth:this.axisLineWidth},e={color:this.labelColor,layer:"back",font:this.labelFont,fontSize:this.labelFontSize},b=this.axisType):(d={lineColor:a.color||this.axisColor,fillColor:"rgba(255, 255, 255, 0)",layer:"back",lineWidth:a.lineWidth||this.axisLineWidth},e={color:a.textColor||this.labelColor,layer:"back",font:a.font||this.labelFont,fontSize:a.font||this.labelFontSize},b=a.type||this.axisType,this.axisColor=d.lineColor,this.axisLineWidth=d.lineWidth,this.axisType=b,this.labelColor=e.color,this.labelFont=e.font,this.labelFontSize=e.fontSize);if(b==="in"){var f=10/this.origZoomX,g=10/this.origZoomY;this.line([[-50,0],[50,0]],d),this.line([[0,-50],[0,50]],d);for(c=this.stepSizeX;c<=50*this.stepSizeX;c+=this.stepSizeX)this.line([[c,-g],[c,g]],d);for(c=-this.stepSizeX;c>=-50*this.stepSizeX;c-=this.stepSizeX)this.line([[c,-g],[c,g]],d);for(c=this.stepSizeY;c<=50*this.stepSizeY;c+=this.stepSizeY)this.line([[-f,c],[f,c]],d);for(c=-this.stepSizeY;c>=-50*this.stepSizeY;c-=this.stepSizeY)this.line([[-f,c],[f,c]],d);if(this.label){for(c=this.stepSizeX;c<=50*this.stepSizeX;c+=this.stepSizeX)this.text(c+"",c-f/2,-2.5*g,e);for(c=-this.stepSizeX;c>=-50*this.stepSizeX;c-=this.stepSizeX)this.text(c+"",c-f/2,-2.5*g,e);for(c=this.stepSizeY;c<=50*this.stepSizeY;c+=this.stepSizeY)this.text(c+"",-2.5*f,c-g/2,e);for(c=-this.stepSizeY;c>=-50*this.stepSizeY;c-=this.stepSizeY)this.text(c+"",-2.5*f,c-g/2,e)}}return this}),a.extendPrototype("screen","contextmenu",function(b){b.preventDefault&&b.preventDefault(),b.returnValue=!1;var c=this.getX(b),d=this.getY(b),e=this.contextmenuWrapper.childNodes[0];e.style.setProperty("top",b.clientY-20+"px"),e.style.setProperty("left",b.clientX+"px");var f=this.contextmenuWrapper;f.style.setProperty("display","block"),f.style.setProperty("width","100%"),f.style.setProperty("height","100%"),e.childNodes[0].childNodes[2].childNodes[0].innerHTML="cartesian: ("+a.round(c,2)+", "+a.round(d,2)+")",e.childNodes[0].childNodes[2].childNodes[1].innerHTML="polar: ("+a.round(a.hypot(c,d),2)+", "+a.round(Math.atan2(d,c),2)+")";var g=this,h=function(){g.contextmenuWrapper.style.setProperty("display","none"),f.style.setProperty("width","0px"),f.style.setProperty("height","0px"),g.contextmenuWrapper.removeEventListener("click",h)};this.contextmenuWrapper.addEventListener("click",h)}),a.extendPrototype("screen","enterFullscreen",function(){var a=this.screenWrapper;return a.requestFullScreen?a.requestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullScreen&&a.webkitRequestFullScreen(),this}),a.extendPrototype("screen","exitFullscreen",function(){return document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),this}),a.extendPrototype("screen","getEventPoint",function(b){var c,d;return b.offsetX?(c=b.offsetX,d=b.offsetY):(c=b.layerX,d=b.layerY),a.point([c,d,1])}),a.extendPrototype("screen","getX",function(a){var b;return a.offsetX?b=a.offsetX:b=a.layerX,(b-this.curTranslateX)/this.curZoomX}),a.extendPrototype("screen","getY",function(a){var b;return a.offsetY?b=a.offsetY:b=a.layerY,(b-this.curTranslateY)/this.curZoomY}),a.extendPrototype("screen","grid",function(b){var c,d,e,f;arguments.length===0||d===!0?(f={lineColor:this.gridColor,fillColor:"rgba(255, 255, 255, 0)",layer:"back",lineWidth:this.gridLineWidth},d=this.gridType,c=this.gridAngle):d!==!1&&(f={lineColor:b.color||this.gridColor,fillColor:"rgba(255, 255, 255, 0)",layer:"back",lineWidth:b.lineWidth||this.gridLineWidth},d=b.type||this.gridType,c=b.angle||this.gridAngle,this.girdColor=f.lineColor,this.gridLineWidth=f.lineWidth,this.gridType=d,this.gridAngle=c);if(d==="cartesian"){for(e=-50;e<=50;e+=this.stepSizeX)this.line([[e,-50],[e,50]],f);for(e=-50;e<=50;e+=this.stepSizeY)this.line([[-50,e],[50,e]],f)}else if(d==="polar"){for(e=0;e<2*Math.PI;e+=c)this.line([[0,0],[50*Math.cos(e),50*Math.sin(e)]],f);for(e=1;e<60;e+=1)this.circle(a.circle([0,0,1],e),f)}return this}),a.extendPrototype("screen","lineEndPoints",function(a){if(a.type==="line"){var b=-(a[2]+a[0]*50)/a[1],c=-(a[2]+a[1]*50)/a[0],d=-(a[2]+a[0]*-50)/a[1],e=-(a[2]+a[1]*-50)/a[0],f=[];return b<50&&b>-50&&f.push([50,b]),d<50&&d>-50&&f.push([-50,d]),c<50&&c>-50&&f.push([c,50]),e<50&&e>-50&&f.push([e,-50]),f}return a}),a.extendPrototype("screen","onmousedown",function(a){if(a.button!==0)return;a.preventDefault&&a.preventDefault(),a.returnValue=!1;if(a.target.tagName==="canvas"||a.target.tagName==="svg"||!this.drag)this.interaction="pan",this.startPoint=this.getEventPoint(a),this.startTransformation=this.curTransformation.copy()}),a.extendPrototype("screen","onmousemove",function(a){var b;a.preventDefault&&a.preventDefault(),a.returnValue=!1,this.interaction==="pan"&&this.pan&&(b=this.getEventPoint(a).minus(this.startPoint),this.curTranslateX=this.startTransformation[0][2]+b[0],this.curTranslateY=this.startTransformation[1][2]+b[1],this.redraw())}),a.extendPrototype("screen","onmouseup",function(a){a.preventDefault&&a.preventDefault(),a.returnValue=!1;if(this.interaction==="pan"||this.interaction==="drag")this.interaction=""}),a.extendPrototype("screen","onmousewheel",function(b){var c,d,e,f;if(!this.zoom)return;b.preventDefault&&b.preventDefault(),b.returnValue=!1,b.wheelDelta?c=b.wheelDelta/360:c=b.detail/-9,f=Math.pow(1+this.zoomSpeed,c),e=this.curTransformation.inverse().times(this.getEventPoint(b)),d=a.matrix([[f,0,e[0]-e[0]*f],[0,f,e[1]-e[1]*f],[0,0,1]]),this.curTransformation=this.curTransformation.times(d),this.redraw(),typeof this.startTransformation=="undefined"&&(this.startTransformation=this.curTransformation.inverse()),this.startTransformation=this.startTransformation.times(d.inverse())}),b.canvas=a.screen(),a.canvas=function(d){var e=a.screen(d);e[c]=b.canvas,Object.defineProperty(e,"drawingStack",{value:[]});var f=document.createElement("div");f.style.setProperty("width","100%"),f.style.setProperty("height","100%"),f.style.setProperty("position","relative"),e.element.parentNode.insertBefore(f,e.element.wrapperDiv);var g=document.createElement("canvas");g.setAttribute("width",e.width+"px"),g.setAttribute("height",e.height+"px"),g.classList.add("MathLib-backLayer"),g.classList.add("MathLib-canvas"),e.backLayer={ctx:g.getContext("2d"),element:g},f.appendChild(g),e.mainLayer={ctx:document.getElementById(d).getContext("2d"),element:document.getElementById(d)},f.appendChild(e.mainLayer.element);var h=document.createElement("canvas");h.setAttribute("width",e.width+"px"),h.setAttribute("height",e.height+"px"),h.classList.add("MathLib-frontLayer"),h.classList.add("MathLib-canvas"),e.frontLayer={ctx:h.getContext("2d"),element:h},f.appendChild(h);var i=[e.mainLayer,e.backLayer,e.frontLayer];return i.forEach(function(a){a.ctx.save(),a.ctx.transform(e.curZoomX,0,0,e.curZoomY,e.curTranslateX,e.curTranslateY),a.element.style.setProperty("position","absolute"),a.element.style.setProperty("left","0px"),a.element.style.setProperty("top","0px")}),e.frontLayer.element.onselectstart=function(){return!1},e.frontLayer.element.onmousedown=function(a){e.onmousedown(a)},e.frontLayer.element.oncontextmenu=function(a){e.oncontextmenu(a)},e.frontLayer.element.onmousemove=function(a){e.onmousemove(a)},e.frontLayer.element.onmouseup=function(a){e.onmouseup(a)},"onmousewheel"in e.frontLayer.element?e.frontLayer.element.onmousewheel=function(a){e.onmousewheel(a)}:e.frontLayer.element.DOMMouseScroll=function(a){e.onmousewheel(a)},e},a.extendPrototype("canvas","applyTransformation",function(){this.clearLayer("back","main","front");var a=this.curTransformation;return this.backLayer.ctx.setTransform(a[0][0],a[1][0],a[0][1],a[1][1],a[0][2],a[1][2]),this.mainLayer.ctx.setTransform(a[0][0],a[1][0],a[0][1],a[1][1],a[0][2],a[1][2]),this.frontLayer.ctx.setTransform(a[0][0],a[1][0],a[0][1],a[1][1],a[0][2],a[1][2]),this}),a.extendPrototype("canvas","circle",function(a,b){var c={fillColor:"rgba(0, 0, 255, 0.05)",lineColor:"rgba(0, 0, 255, 1)",lineWidth:.05,dash:[],dashOffset:0},d,e,f;b=b||{},"layer"in b?d=this[b.layer+"Layer"].ctx:d=this.mainLayer.ctx,b.redraw?f=b:f=this.normalizeOptions(c,b);for(e in f)f.hasOwnProperty(e)&&(d[e]=f[e]);return d.beginPath(),d.arc(a.center[0],a.center[1],a.radius,0,2*Math.PI),d.closePath(),d.fill(),d.stroke(),d===this.mainLayer.ctx&&!f.redraw&&(f.redraw=!0,this.drawingStack.push({object:a,options:f,type:"circle"})),this}),a.extendPrototype("canvas","clearLayer",function(){var b=this,c=this.curTransformation.inverse().times(a.point(this.element.width,0)),d=this.curTransformation.inverse().times(a.point(0,this.element.height));return Array.prototype.forEach.call(arguments,function(a){b[a+"Layer"].ctx.clearRect(c[0],c[1],d[0]-c[0],d[1]-c[1])}),this}),a.extendPrototype("canvas","line",function(a,b){var c={fillColor:"rgba(0, 0, 0, 0)",lineColor:"rgba(0, 0, 0, 1)",lineWidth:.05,dash:[],dashOffset:0},d=this.lineEndPoints(a),e,f,g;b=b||{},"layer"in b?e=this[b.layer+"Layer"].ctx:e=this.mainLayer.ctx,b.redraw?g=b:g=this.normalizeOptions(c,b);for(f in g)g.hasOwnProperty(f)&&(e[f]=g[f]);return e.beginPath(),e.moveTo(d[0][0],d[0][1]),e.lineTo(d[1][0],d[1][1]),e.stroke(),e.closePath(),e===this.mainLayer.ctx&&!g.redraw&&(g.redraw=!0,this.drawingStack.push({object:a,options:g,type:"line"})),this}),a.extendPrototype("canvas","normalizeOptions",function(a,b){return{fillStyle:b.fillColor||b.color||a.fillColor||a.color,lineWidth:b.lineWidth||a.lineWidth,font:b.font||a.font,fontSize:b.fontSize||a.fontSize,size:b.size||a.size,mozDash:b.dash||a.dash,mozDashOffset:b.dashOffset||a.dashOffset,strokeStyle:b.lineColor||b.color||a.lineColor||a.color,webkitLineDash:b.dash||a.dash,webkitLineDashOffset:b.dashOffset||a.dashOffset}}),a.extendPrototype("canvas","oncontextmenu",function(a){this.contextmenu(a)}),a.extendPrototype("canvas","path",function(a,b){var c={fillColor:"rgba(0, 0, 0, 0)",lineColor:"rgba(0, 0, 255, 1)",lineWidth:.05,dash:[],dashOffset:0},d,e,f;b=b||{},"layer"in b?d=this[b.layer+"Layer"].ctx:d=this.mainLayer.ctx,b.redraw?f=b:f=this.normalizeOptions(c,b);for(e in f)f.hasOwnProperty(e)&&(d[e]=f[e]);return d.beginPath(),d.moveTo(a[0][0],a[0][1]),a.forEach(function(a){d.lineTo(a[0],a[1])}),d.stroke(),d.closePath(),d===this.mainLayer.ctx&&!f.redraw&&(f.redraw=!0,this.drawingStack.push({object:a,options:f,type:"path"})),this}),a.extendPrototype("canvas","point",function(a,b){var c={fillColor:"rgba(0, 0, 0, 1)",lineColor:"rgba(0, 0, 0, 1)",lineWidth:.05,dash:[],dashOffset:0},d,e,f;b=b||{},"layer"in b?d=this[b.layer+"Layer"].ctx:d=this.mainLayer.ctx,b.redraw?f=b:f=this.normalizeOptions(c,b);for(e in f)f.hasOwnProperty(e)&&(d[e]=f[e]);return d.beginPath(),d.arc(a[0]/a[2],a[1]/a[2],.05,0,2*Math.PI),d.closePath(),d.stroke(),d.fill(),d===this.mainLayer.ctx&&!f.redraw&&(f.redraw=!0,this.drawingStack.push({object:a,options:f,type:"point"})),this}),a.extendPrototype("canvas","redraw",function(){var a=this;return this.clearLayer("back","main","front"),this.grid(),this.axis(),this.drawingStack.forEach(function(b,c){a[b.type](b.object,b.options)}),this}),a.extendPrototype("canvas","resetView",function(){return this.curTransformation=this.origTransformation,this.redraw(),this}),a.extendPrototype("canvas","resize",function(a,b){return[this.backLayer,this.mainLayer,this.frontLayer].forEach(function(c){c.element.setAttribute("width",a+"px"),c.element.setAttribute("height",b+"px")}),this}),a.extendPrototype("canvas","text",function(a,b,c,d){var e={font:"Helvetica",fontSize:"16px",fillColor:"rgba(0, 0, 0, 1)",lineColor:"rgba(0, 0, 0, 1)",lineWidth:.05,dash:[],dashOffset:0,size:.4},f,g,h;d=d||{},"layer"in d?f=this[d.layer+"Layer"].ctx:f=this.mainLayer.ctx,d.redraw?h=d:h=this.normalizeOptions(e,d);for(g in h)h.hasOwnProperty(g)&&(f[g]=h[g]);return f.font=h.fontSize+" "+h.font,f.save(),f.transform(1/this.origZoomX,0,0,1/this.origZoomY,0,0),f.fillText(a,b*this.origZoomX,-c*this.origZoomY),f.restore(),f===this.mainLayer.ctx&&!h.redraw&&(h.redraw=!0,this.drawingStack.push({object:a,options:h,type:"text"})),this}),b.svg=a.screen(),a.svg=function(d){var e=document.getElementById(d),f=a.screen(d);f[c]=b.svg;var g=document.createElementNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","matrix("+f.curZoomX+",0, 0,"+f.curZoomY+", "+f.width/2+", "+f.height/2+")"),e.appendChild(g),f.ctx=g;var h=document.createElementNS("http://www.w3.org/2000/svg","g");h.className.baseVal+=" MathLib-backLayer ",g.appendChild(h),f.backLayer={element:h};var i=document.createElementNS("http://www.w3.org/2000/svg","g");i.className.baseVal+=" MathLib-mainLayer ",g.appendChild(i),f.mainLayer={element:i};var j=document.createElementNS("http://www.w3.org/2000/svg","g");return j.className.baseVal+=" MathLib-frontLayer ",g.appendChild(j),f.frontLayer={element:j},e.onselectstart=function(){return!1},e.onmousedown=function(a){f.onmousedown(a)},e.oncontextmenu=function(a){f.oncontextmenu(a)},e.onmousemove=function(a){f.onmousemove(a)},e.onmouseup=function(a){f.onmouseup(a)},"onmousewheel"in e?e.onmousewheel=function(a){f.onmousewheel(a)}:e.DOMMouseScroll=function(a){f.onmousewheel(a)},f},a.extendPrototype("svg","applyTransformation",function(){var a=this.curTransformation;return this.ctx.setAttribute("transform","matrix("+a[0][0]+","+a[1][0]+","+a[0][1]+","+a[1][1]+","+a[0][2]+","+a[1][2]+")"),this}),a.extendPrototype("svg","circle",function(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","circle"),d={fillColor:"rgba(0, 0, 255, 0.05)",lineColor:"rgba(0, 0, 255, 1)",lineWidth:"0.05"},e,f,g;b=b||{},"layer"in b?e=this[b.layer+"Layer"]:e=this.mainLayer,g=this.normalizeOptions(d,b);for(f in g)g.hasOwnProperty(f)&&c.setAttributeNS(null,f,g[f]);return c.setAttributeNS(null,"cx",a.center[0]/a.center[2]),c.setAttributeNS(null,"cy",a.center[1]/a.center[2]),c.setAttributeNS(null,"r",a.radius),e.element.appendChild(c),this}),a.extendPrototype("svg","clearLayer",function(){var a=this;return Array.prototype.forEach.call(arguments,function(b){b=a[b+"Layer"].element;while(b.hasChildNodes())b.removeChild(b.firstChild)}),this}),a.extendPrototype("svg","line",function(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","line"),d=this.lineEndPoints(a),e={lineColor:"rgba(0, 0, 0, 1)",lineWidth:"0.05"},f,g,h;b=b||{},"layer"in b?f=this[b.layer+"Layer"]:f=this.mainLayer,h=this.normalizeOptions(e,b);for(g in h)h.hasOwnProperty(g)&&c.setAttributeNS(null,g,h[g]);return c.setAttributeNS(null,"x1",d[0][0]),c.setAttributeNS(null,"y1",d[0][1]),c.setAttributeNS(null,"x2",d[1][0]),c.setAttributeNS(null,"y2",d[1][1]),f.element.appendChild(c),this}),a.extendPrototype("svg","normalizeOptions",function(a,b){return{fill:b.fillColor||b.color||a.fillColor||a.color,"font-family":b.font||a.font,"font-size":b.fontSize||a.fontSize,size:b.size||a.size,stroke:b.lineColor||b.color||a.lineColor||a.color,"stroke-dasharray":b.dash||a.dash,"stroke-dashoffset":b.dashOffset||a.dashOffset,"stroke-width":b.lineWidth||a.lineWidth}}),a.extendPrototype("svg","oncontextmenu",function(a){this.contextmenu(a)}),a.extendPrototype("svg","path",function(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","path"),d="M"+a.reduce(function(a,b){return a+" L"+b.join(" ")}),e={fillColor:"rgba(255, 255, 255, 0)",lineColor:"rgba(0, 0, 255, 1)",lineWidth:"0.05"},f,g,h;b=b||{},"layer"in b?f=this[b.layer+"Layer"]:f=this.mainLayer,h=this.normalizeOptions(e,b);for(g in h)h.hasOwnProperty(g)&&c.setAttributeNS(null,g,h[g]);return c.setAttributeNS(null,"d",d),f.element.appendChild(c),this}),a.extendPrototype("svg","point",function(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","circle"),d={fillColor:"rgba(0, 0, 0, 1)",lineColor:"rgba(0, 0, 0, 1)",lineWidth:"0.05"},e,f,g;b=b||{},"layer"in b?e=this[b.layer+"Layer"]:e=this.mainLayer,g=this.normalizeOptions(d,b);for(f in g)g.hasOwnProperty(f)&&c.setAttributeNS(null,f,g[f]);return c.setAttributeNS(null,"cx",a[0]/a[2]),c.setAttributeNS(null,"cy",a[1]/a[2]),c.setAttributeNS(null,"r",.1),e.element.appendChild(c),this}),a.extendPrototype("svg","redraw",function(){return this}),a.extendPrototype("svg","resetView",function(){return this.ctx.setAttribute("transform","matrix("+this.origZoomX+", 0, 0, "+this.origZoomY+", "+this.origTranslateX+", "+this.origTranslateY+")"),this}),a.extendPrototype("svg","resize",function(a,b){return this.element.setAttribute("width",a+"px"),this.element.setAttribute("height",b+"px"),this}),a.extendPrototype("svg","text",function(a,b,c,d){var e=document.createElementNS("http://www.w3.org/2000/svg","text"),f={font:"Helvetica",fontSize:"16px",lineColor:"rgba(0, 0, 0, 1)",lineWidth:.05},g,h,i,j;d=d||{},"layer"in d?g=this[d.layer+"Layer"]:g=this.mainLayer,i=this.normalizeOptions(f,d),j=1/(3*parseFloat(i["font-size"]));for(h in i)i.hasOwnProperty(h)&&h!=="size"&&e.setAttributeNS(null,h,i[h]);return e.setAttributeNS(null,"transform","scale("+j+", -"+j+")"),e.textContent=a,e.setAttributeNS(null,"x",1/j*b),e.setAttributeNS(null,"y",1/j*c),g.element.appendChild(e),this});var p=function(){function b(a){var b=this;this.type="vector",a.forEach(function(a,c){b[c]=a}),this.length=a.length}return b.prototype.conjugate=function(){return new a.Vector(this.map(a.conjugate))},b.prototype.every=function(a){return Array.prototype.every.call(this,a)},b.prototype.forEach=function(a){Array.prototype.forEach.call(this,a)},b.prototype.isEqual=function(b){return this.length!==b.length?!1:this.every(function(c,d){return a.isEqual(c,b[d])})},b.prototype.isZero=function(b){return this.every(a.isZero)},b.prototype.map=function(a){return new this.constructor(Array.prototype.map.call(this,a))},b.prototype.minus=function(a){return this.plus(a.negative())},b.prototype.negative=function(){return this.map(a.negative)},b.prototype.normalize=function(){return this.times(1/this.size())},b.prototype.outerProduct=function(b){return new a.Matrix(this.map(function(c){return b.map(function(b){return a.times(c,b)})}))},b.prototype.plus=function(b){if(this.length===b.length)return new a.Vector(this.map(function(c,d){return a.plus(c,b[d])}))},b.prototype.reduce=function(){return Array.prototype.reduce.apply(this,arguments)},b.prototype.scalarProduct=function(b){return this.reduce(function(c,d,e,f){return a.plus(c,a.times(f[e],b[e]))},0)},b.prototype.size=function(){return a.hypot.apply(null,this)},b.prototype.times=function(b){var c=[],d,e;if(typeof b=="number"||b.type==="complex")return this.map(function(c){return a.times(c,b)});if(b.type==="matrix"){c=b.toColVectors();for(d=0,e=c.length;d<e;d++)c[d]=this.scalarProduct(c[d]);return new a.Vector(c)}},b.prototype.toArray=function(){return Array.prototype.slice.call(this)},b.prototype.toContentMathMLString=function(){return this.reduce(function(b,c){return b+a.toContentMathMLString(c)},"<vector>")+"</vector>"},b.prototype.toLaTeX=function(){return"\\begin{pmatrix}\n\t"+this.reduce(function(b,c){return b+"\\\\\n\t"+a.toLaTeX(c)})+"\n\\end{pmatrix}"},b.prototype.toMathMLString=function(){return this.reduce(function(b,c){return b+"<mtr><mtd>"+a.toMathMLString(c)+"</mtd></mtr>"},"<mrow><mo>(</mo><mtable>")+"</mtable><mo>)</mo></mrow>"},b.prototype.toString=function(){return"("+this.reduce(function(b,c){return b+", "+a.toString(c)})+")"},b.prototype.vectorproduct=function(b){var c=[];return this.length===3&&b.length===3&&(c.push(a.minus(a.times(this[1],b[2]),a.times(this[2],b[1]))),c.push(a.minus(a.times(this[2],b[0]),a.times(this[0],b[2]))),c.push(a.minus(a.times(this[0],b[1]),a.times(this[1],b[0])))),new a.Vector(c)},b.zero=function(b){var c=[],d;for(d=0;d<b;d++)c.push(0);return new a.Vector(c)},b}();a.Vector=p;var q=function(){function b(b,c){this.type="circle",b.type===undefined&&(b=new a.Point(b.concat(1))),this.center=b,this.radius=c}return b.prototype.area=function(){return this.radius*this.radius*Math.PI},b.prototype.circumference=function(){return 2*this.radius*Math.PI},b.prototype.draw=function(a,b){if(Array.isArray(a)){var c=this;a.forEach(function(a){a.circle(c,b)})}else a.circle(this,b);return this},b.prototype.isEqual=function(b){return a.isEqual(this.radius,b.radius)&&this.center.isEqual(b.center)},b.prototype.positionOf=function(b){var c;if(b.type==="point"&&b.dim===2)return c=b.distanceTo(this.center)-this.radius,a.isZero(c)?"on":c<0?"in":"out"},b.prototype.reflectAt=function(b){return new a.Circle(this.center.reflectAt(b),this.radius)},b.prototype.toLaTeX=function(){return"B_{"+a.toLaTeX(this.radius)+"}\\left("+this.center.toLaTeX()+"\\right)"},b.prototype.toMatrix=function(){var b=this.center[0]/this.center[2],c=this.center[1]/this.center[2],d=this.radius;return new a.Matrix([[1,0,-b],[0,1,-c],[-b,-c,b*b+c*c-d*d]])},b}();a.Circle=q;var r=function(){function b(a,b){this.re=a,this.im=b,this.type="complex"}return b.prototype.abs=function(){return a.hypot(this.re,this.im)},b.prototype.arccos=function(){return a.minus(Math.PI/2,this.arcsin())},b.prototype.arccot=function(){return a.minus(Math.PI/2,this.arctan())},b.prototype.arccsc=function(){return a.times(new a.Complex(0,1),a.ln(a.plus(a.sqrt(a.minus(1,a.divide(1,a.times(this,this)))),a.divide(new a.Complex(0,1),this))))},b.prototype.arcsin=function(){var b=this.re,c=this.im;return new a.Complex(a.sign(b)/2*a.arccos(Math.sqrt(Math.pow(b*b+c*c-1,2)+4*c*c)-(b*b+c*c)),a.sign(c)/2*a.arcosh(Math.sqrt(Math.pow(b*b+c*c-1,2)+4*c*c)+(b*b+c*c)))},b.prototype.arctan=function(){var b=new a.Complex(-this.im,this.re);return a.times(new a.Complex(0,.5),a.ln(a.divide(a.plus(1,b),a.minus(1,b))))},b.prototype.arg=function(){return Math.atan2(this.im,this.re)},b.prototype.artanh=function(){return a.times(.5,a.minus(a.ln(a.plus(1,this)),a.ln(a.minus(1,this))))},b.prototype.compare=function(b){var c=a.sign(this.abs()-b.abs());return c?c:a.sign(this.arg()-b.arg())},b.prototype.conjugate=function(){return new a.Complex(this.re,a.negative(this.im))},b.prototype.copy=function(){return new a.Complex(a.copy(this.re),a.copy(this.im))},b.prototype.cos=function(){return new a.Complex(a.cos(this.re)*a.cosh(this.im),-a.sin(this.re)*a.sinh(this.im))},b.prototype.cosh=function(){return new a.Complex(a.cos(this.im)*a.cosh(this.re),a.sin(this.im)*a.sinh(this.re))},b.prototype.divide=function(b){return this.times(a.inverse(b))},b.prototype.exp=function(){return new a.Complex(a.exp(this.re)*a.cos(this.im),a.exp(this.re)*a.sin(this.im))},b.prototype.inverse=function(){return new a.Complex(a.divide(this.re,a.plus(a.pow(this.re,2),a.pow(this.im,2))),a.divide(a.negative(this.im),a.plus(a.pow(this.re,2),a.pow(this.im,2))))},b.prototype.isEqual=function(b){return typeof b=="number"?a.isEqual(this.re,b)&&a.isZero(this.im):b.type==="complex"?a.isEqual(this.re,b.re)&&a.isEqual(this.im,b.im):!1},b.prototype.isFinite=function(){return a.isFinite(this.re)&&a.isFinite(this.im)},b.prototype.isOne=function(){return a.isOne(this.re)&&a.isZero(this.im)},b.prototype.isReal=function(){return a.isZero(this.im)},b.prototype.isZero=function(){return a.isZero(this.re)&&a.isZero(this.im)},b.prototype.ln=function(){return new a.Complex(a.ln(this.abs()),this.arg())},b.prototype.minus=function(b){return this.plus(a.negative(b))},b.prototype.mod=function(b){return new a.Complex(a.mod(this.re,b),a.mod(this.im,b))},b.prototype.negative=function(){return new a.Complex(a.negative(this.re),a.negative(this.im))},b.one=new b(1,0),b.prototype.plus=function(b){if(b.type==="complex")return new a.Complex(a.plus(this.re,b.re),a.plus(this.im,b.im));if(typeof b=="number")return new a.Complex(a.plus(this.re,b),this.im)},b.polar=function(b,c){return new a.Complex(b*Math.cos(c),b*Math.sin(c))},b.prototype.pow=function(b){return new a.Complex(Math.pow(this.abs(),b),b*this.arg())},b.prototype.sign=function(){return a.Complex.polar(1,this.arg())},b.prototype.sin=function(){return new a.Complex(a.sin(this.re)*a.cosh(this.im),a.cos(this.re)*a.sinh(this.im))},b.prototype.sinh=function(){return new a.Complex(a.cos(this.im)*a.sinh(this.re),a.sin(this.im)*a.cosh(this.re))},b.prototype.times=function(b){if(b.type==="complex")return new a.Complex(a.minus(a.times(this.re,b.re),a.times(this.im,b.im)),a.plus(a.times(this.re,b.im),a.times(this.im,b.re)));if(typeof b=="number")return new a.Complex(a.times(this.re,b),a.times(this.im,b))},b.prototype.toContentMathMLString=function(){return'<cn type="complex-cartesian">'+this.re+"<sep/>"+this.im+"</cn>"},b.prototype.toLaTeX=function(){var b="",c=!1;return a.isZero(this.re)||(b=a.toLaTeX(this.re),c=!0),a.isZero(this.im)||(b+=a.toLaTeX(this.im,c)+"i"),b.length===0&&(b="0"),b},b.prototype.toMathMLString=function(){var b="",c=!1;return a.isZero(this.re)||(b=a.toMathMLString(this.re),c=!0),a.isZero(this.im)||(b+=a.toMathMLString(this.im,c)+"<mo>&#x2062;</mo><mi>i</mi>"),b.length===0&&(b="<mn>0</mn>"),b},b.prototype.toMatrix=function(){return new a.Matrix([[this.re,a.negative(this.im)],[this.im,this.re]])},b.prototype.toPoint=function(){return new a.Point(this.re,this.im)},b.prototype.toString=function(){var b="";return a.isZero(this.re)||(b=a.toString(this.re)),a.isZero(this.im)||(b+=(this.im>0?b.length?"+":"":"-")+a.toString(Math.abs(this.im))+"i"),b.length===0&&(b="0"),b},b.zero=new b(0,0),b}();a.Complex=r;var s=function(b){function c(a){b.call(this,a),this.type="line",this.dim=2}return __extends(c,b),c.prototype.draw=function(a,b){if(Array.isArray(a)){var c=this;a.forEach(function(a){a.line(c,b)})}else a.line(this,b);return this},c.prototype.isEqual=function(b){var c=this.normalize();return b=b.normalize(),this.length!==b.length?!1:c.every(function(c,d){return a.isEqual(c,b[d])})},c.prototype.isFinite=function(b){return!a.isZero(this[this.length-1])},c.prototype.isOrthogonalTo=function(b){return a.isEqual((new a.Point([0,0,1])).crossRatio(this.meet(new a.Line([0,0,1])),b.meet(new a.Line([0,0,1])),a.Point.I,a.Point.J),-1)},c.prototype.isParallelTo=function(b){return this.every(function(c,d){return a.isEqual(c,b[d])||d===b.length-1})},c.prototype.meet=function(b){return new a.Point([this[1]*b[2]-this[2]*b[1],b[0]*this[2]-this[0]*b[2],this[0]*b[1]-this[1]*b[0]])},c.prototype.normalize=function(a){var b=this[this.dim];return this.map(function(a){return a/b})},c}(p);a.Line=s;var t=function(){function b(b){var c=this;this.type="matrix";if(typeof b=="string"){if(b.indexOf("<")>-1)return(new a.MathML(b)).parse();b=b.trim().replace(/;?\n/g,"],["),b=JSON.parse("[["+b+"]]")}b.forEach(function(a,b){c[b]=a}),this.length=b.length,this.cols=b[0].length,this.rows=b.length}return b.prototype.adjoint=function(b){return this.map(a.conjugate).transpose()},b.prototype.adjugate=function(b){return this.map(function(b,c,d,e){return a.times(e.remove(d,c).determinant(),1-(c+d)%2*2)})},b.prototype.cholesky=function(){var b,c,d=[],e,f,g,h;for(b=0,c=this.rows;b<c;b++)d.push([]);for(b=0,c=this.rows;b<c;b++){for(h=0;h<b;h++){g=0;for(e=0,f=h;e<f;e++)g=a.plus(g,a.times(d[b][e],d[h][e]));d[b][h]=(this[b][h]-g)/d[h][h]}g=0;for(e=0,f=h;e<f;e++)g=a.plus(g,a.times(d[b][e],d[b][e]));d[b][h]=Math.sqrt(this[h][h]-g);for(h++;h<this.cols;h++)d[b][h]=0}return d=new a.Matrix(d),this.cholesky=function(){return d},d},b.prototype.copy=function(){return this.map(a.copy)},b.prototype.determinant=function(){if(this.isSquare()){var b,c;return this.rank()<this.rows?c=0:(b=this.LU(),c=a.times(this.LUpermutation.sgn(),a.times.apply(null,b.diag()))),this.determinant=function(){return c},c}},b.prototype.diag=function(){var a=[],b,c;for(b=0,c=Math.min(this.rows,this.cols);b<c;b++)a.push(this[b][b]);return a},b.prototype.divide=function(b){return this.times(a.inverse(b))},b.prototype.every=function(a){return Array.prototype.every.call(this,function(b,c){return Array.prototype.every.call(b,function(b,d){return a(b,c,d,this)})})},b.prototype.forEach=function(a){Array.prototype.forEach.call(this,function(b,c){return Array.prototype.forEach.call(b,function(b,d){return a(b,c,d,this)})})},b.prototype.gershgorin=function(){var b=[],c=[],d=[],e=[],f,g;for(f=0,g=this.rows;f<g;f++)c.push(0),d.push(0);this.forEach(function(e,f,g){f===g?a.is(e,"complex")?b.push(e.toPoint()):b.push(new a.Point([e,0,1])):(c[g]+=a.abs(e),d[f]+=a.abs(e))});for(f=0,g=this.rows;f<g;f++)e.push(new a.Circle(b[f],Math.min(c[f],d[f])));return e},b.prototype.givens=function(){var b=this.rows,c=this.cols,d=this.copy(),e=a.Matrix.identity(b),f,g,h,i,j,k,l,m,n,o;for(i=0;i<c;i++)for(j=i+1;j<b;j++)if(!a.isZero(d[j][i])){h=(d[i][i]<0?-1:1)*a.hypot(d[i][i],d[j][i]),f=d[i][i]/h,g=d[j][i]/h,l=[],m=[],n=[],o=[];for(k=0;k<c;k++)l.push(d[i][k]),m.push(d[j][k]);for(k=0;k<c;k++)d[i][k]=m[k]*g+l[k]*f,d[j][k]=m[k]*f-l[k]*g;for(k=0;k<b;k++)n.push(e[k][i]),o.push(e[k][j]);for(k=0;k<b;k++)e[k][i]=n[k]*f+o[k]*g,e[k][j]=-n[k]*g+o[k]*f}return[e,d]},b.givensMatrix=function(b,c,d,e){var f=a.Matrix.identity(b);return f[d][d]=f[c][c]=Math.cos(e),f[c][d]=Math.sin(e),f[d][c]=-f[c][d],f},b.identity=function(b){var c=[],d=[],e,f;b=b||1;for(e=0,f=b-1;e<f;e++)c.push(0);c.push(1),c=c.concat(c),c=c.slice(0,-1);for(e=0,f=b;e<f;e++)d.push(c.slice(b-e-1,2*b-e-1));return new a.Matrix(d)},b.prototype.inverse=function(){if(!this.isSquare()&&this.determinant())return;return this.adjugate().divide(this.determinant())},b.prototype.isBandMatrix=function(b,c){var d,e,f,g;return arguments.length===1&&(c=b),this.every(function(d,e,f){return e-b<=f&&e+c>=f||a.isZero(d)})},b.prototype.isDiag=function(){var a,b,c,d;if((this.hasOwnProperty("isUpper")&&this.isUpper())+ +(this.hasOwnProperty("isLower")&&this.isLower())+ +(this.hasOwnProperty("isSymmetric")&&this.isSymmetric())>1)return!0;for(a=0,c=this.rows;a<c;a++)for(b=0,d=this.cols;b<d;b++)if(a!==b&&this[a][b]!==0)return!1;return!0},b.prototype.isEqual=function(b){var c,d,e,f;if(this===b)return!0;if(this.rows===b.rows&&this.cols===b.cols){for(c=0,e=this.rows;c<e;c++)for(d=0,f=this.cols;d<f;d++)if(!a.isEqual(this[c][d],b[c][d]))return!1;return!0}return!1},b.prototype.isIdentity=function(){if(!this.isSquare())return!1;var b=this.every(function(b,c,d){return c===d?a.isOne(b):a.isZero(b)});return this.isIdentity=function(){return b},b},b.prototype.isInvertible=function(){return this.isSquare()&&this.rank()===this.rows},b.prototype.isLower=function(){return this.slice(0,-1).every(function(b,c){return b.slice(c+1).every(a.isZero)})},b.prototype.isNegDefinite=function(){if(!this.isSquare())return;return this.rows===1?this[0][0]<0:this.rows%2===0?this.determinant()>0&&this.remove(this.rows-1,this.cols-1).isNegDefinite():this.determinant()<0&&this.remove(this.rows-1,this.cols-1).isNegDefinite()},b.prototype.isOrthogonal=function(){return this.transpose().times(this).isIdentity()},b.prototype.isPermutation=function(){var b=[],c=[];return this.every(function(d,e,f){return a.isOne(d)?b[e]||c[f]?!1:(b[e]=!0,c[f]=!0,!0):a.isZero(d)?!0:!1})&&b.length===this.rows&&c.length===this.cols},b.prototype.isPosDefinite=function(){if(!this.isSquare())return;return this.rows===1?this[0][0]>0:this.determinant()>0&&this.remove(this.rows-1,this.cols-1).isPosDefinite()},b.prototype.isReal=function(){return this.every(a.isReal)},b.prototype.isScalar=function(){var b=this.rows,c=this.diag,d;if(this.hasOwnProperty("isIdentity")&&this.hasOwnProperty("isZero"))return this.isIdentity()||this.isZero()?!0:!1;if(this.isDiag()){for(d=1;d<b;d++)if(!a.isEqual(c[0],c[d]))return!1;return!0}return!1},b.prototype.isSquare=function(){return this.cols===this.rows},b.prototype.isSymmetric=function(){var b,c,d=!0;if(!this.isSquare())d=!1;else e:for(b=0;b<this.rows;b++)for(c=b+1;c<this.cols;c++)if(!a.isEqual(this[b][c],this[c][b])){d=!1;break e}return this.isSymmetric=function(){return d},d},b.prototype.isUpper=function(){return this.slice(1).every(function(b,c){return b.slice(0,c+1).every(a.isZero)})},b.prototype.isVector=function(){return this.rows===1||this.cols===1},b.prototype.isZero=function(){var b=this.every(a.isZero);return this.isZero=function(){return b},b},b.prototype.LU=function(b){var c,d,e,f,g,h=this.toArray(),i=this.rows,j=this.cols,k=[];for(e=0;e<j;e++){if(!b){g=e;for(c=e+1;c<i;c++)Math.abs(h[c][e])>Math.abs(h[g][e])&&(g=c);g!==e&&(k.unshift([g,e]),f=h[g],h[g]=h[e],h[e]=f)}if(h[e][e]!==0)for(c=e+1;c<i;c++){h[c][e]=a.divide(h[c][e],h[e][e]);for(d=e+1;d<j;d++)h[c][d]=a.minus(h[c][d],a.times(h[c][e],h[e][d]))}}return h=new a.Matrix(h),this.LU=function(){return h},this.LUpermutation=new a.Permutation(k),h},b.prototype.map=function(b){var c=this;return new a.Matrix(Array.prototype.map.call(this,function(a,d){return Array.prototype.map.call(a,function(a,e){return b(a,d,e,c)})}))},b.prototype.minor=function(a,b){return this.remove(a,b).determinant()},b.prototype.minus=function(a){return this.plus(a.negative())},b.prototype.negative=function(){var b=[],c,d;for(c=0,d=this.rows;c<d;c++)b.push(this[c].map(a.negative));return new a.Matrix(b)},b.numbers=function(b,c,d){var e=[],f=[],g,h;for(g=0,h=d||c||1;g<h;g++)e.push(b);for(g=0,h=c||1;g<h;g++)f.push(e.slice());return new a.Matrix(f)},b.one=function(b,c){return b=b||1,c=c||1,a.Matrix.numbers(1,b,c)},b.prototype.plus=function(b){var c=[],d=this.rows,e=this.cols,f,g;for(f=0;f<d;f++){c[f]=[];for(g=0;g<e;g++)c[f][g]=a.plus(this[f][g],b[f][g])}return new a.Matrix(c)},b.random=function(b,c){var d,e=[],f,g,h,i;for(f=0,h=b||1;f<h;f++){d=[];for(g=0,i=c||b||1;g<i;g++)d.push(Math.random());e.push(d)}return new a.Matrix(e)},b.prototype.rank=function(){var b=0,c,d,e,f;c=this.rref();g:for(d=Math.min(this.rows,this.cols)-1;d>=0;d--)for(f=this.cols-1;f>=d;f--)if(!a.isZero(c[d][f])){b=d+1;break g}return this.rank=function(){return b},b},b.prototype.reduce=function(){return Array.prototype.reduce.apply(this,arguments)},b.prototype.remove=function(b,c){var d=this.toArray();if(b||b===0)typeof b=="number"&&(b=[b]),d=d.filter(function(a,c,d){return b.indexOf(c)===-1});if(c||c===0)typeof c=="number"&&(c=[c]),c=c.sort().reverse(),c.forEach(function(a){d=d.map(function(b){return b.splice(a,1),b})});return new a.Matrix(d)},b.prototype.rref=function(){var b=0,c=this.toArray(),d,e,f,g,h;for(f=0;f<this.rows;f++){if(this.cols<=b)return new a.Matrix(c);d=f;while(c[d][b]===0){d++;if(this.rows===d){d=f,b++;if(this.cols===b)return new a.Matrix(c)}}var i=c[d];c[d]=c[f],c[f]=i,h=c[f][b];for(e=0;e<this.cols;e++)c[f][e]/=h;for(d=0;d<this.rows;d++){if(d===f)continue;h=c[d][b];for(e=0;e<this.cols;e++)c[d][e]=a.minus(c[d][e],a.times(h,c[f][e]))}b++}return new a.Matrix(c)},b.prototype.slice=function(a){return Array.prototype.slice.apply(this,arguments)},b.prototype.solve=function(b){var c=this.LU(),d,e,f=b.length,g=[],h=[];b=this.LUpermutation.applyTo(b);for(d=0;d<f;d++){h[d]=b[d];for(e=0;e<d;e++)h[d]=a.minus(h[d],a.times(c[d][e],h[e]))}for(d=f-1;d>=0;d--){g[d]=h[d];for(e=d+1;e<f;e++)g[d]=a.minus(g[d],a.times(c[d][e],g[e]));g[d]=a.divide(g[d],c[d][d])}return new b.constructor(g)},b.prototype.some=function(a){return Array.prototype.some.call(this,function(b,c){return Array.prototype.some.call(b,function(b,d){return a(b,c,d,this)})})},b.prototype.times=function(b){var c=[],d,e,f,g;if(typeof b=="number"||b.type==="complex")return this.map(function(c){return a.times(c,b)});if(b.type==="matrix"){if(this.cols===b.rows){for(e=0;e<this.rows;e++){c[e]=[];for(f=0;f<b.cols;f++){d=0;for(g=0;g<this.cols;g++)d=a.plus(d,a.times(this[e][g],b[g][f]));c[e][f]=d}}return new a.Matrix(c)}}else if(b.type==="point"||b.type==="vector")if(this.cols===b.length){for(f=0;f<this.rows;f++){d=0;for(g=0;g<this.cols;g++)d=a.plus(d,a.times(this[f][g],b[g]));c.push(d)}return new b.constructor(c)}},b.prototype.toArray=function(){return Array.prototype.map.call(this,function(b){return Array.prototype.map.call(b,function(b){return a.copy(b)})})},b.prototype.toColVectors=function(){return this.transpose().toRowVectors()},b.prototype.toComplex=function(){if(this.rows!==2||this.cols!==2||this[0][0]!==this[1][1]||this[0][1]!==a.negative(this[1][0]))return;return new a.Complex(this[0][0],this[1][0])},b.prototype.toContentMathMLString=function(){return this.reduce(function(b,c){return b+c.reduce(function(b,c){return b+a.toContentMathMLString(c)},"<matrixrow>")+"</matrixrow>"},"<matrix>")+"</matrix>"},b.prototype.toLaTeX=function(){return"\\begin{pmatrix}\n"+this.reduce(function(b,c){return b+c.reduce(function(b,c){return b+" & "+a.toLaTeX(c)})+"\\\n"},"").slice(0,-2)+"\n\\end{pmatrix}"},b.prototype.toMathMLString=function(){return this.reduce(function(b,c){return b+c.reduce(function(b,c){return b+"<mtd>"+a.toMathMLString(c)+"</mtd>"},"<mtr>")+"</mtr>"},"<mrow><mo> ( </mo><mtable>")+"</mtable><mo> ) </mo></mrow>"},b.prototype.toRowVectors=function(){return this.toArray().map(function(b){return new a.Vector(b)})},b.prototype.toString=function(){return this.reduce(function(b,c){return b+c.reduce(function(b,c){return b+"\t"+a.toString(c)})+"\n"},"").slice(0,-1)},b.prototype.trace=function(){var b=a.plus.apply(null,this.diag());return this.trace=function(){return b},b},b.prototype.transpose=function(){var b=[],c,d,e,f,g;for(d=0,f=this.cols;d<f;d++){c=[];for(e=0,g=this.rows;e<g;e++)c.push(this[e][d]);b.push(c)}return b=new a.Matrix(b),this.transpose=function(){return b},b},b.zero=function(b,c){return b=b||1,c=c||1,a.Matrix.numbers(0,b,c)},b}();a.Matrix=t;var u=function(){function b(a){var c=this;this.type="permutation",Array.isArray(a[0])?(cycle=a,permutation=b.cycleToList(cycle)):(permutation=a,cycle=b.listToCycle(permutation)),permutation.forEach(function(a,b){c[b]=a}),this.length=permutation.length,this.cycle=cycle}return b.prototype.applyTo=function(a){var b,c;return typeof a=="number"?a>=this.length?a:this[a]:(b=this,c=a.map(function(c,d){return a[b.applyTo(d)]}),a.type===undefined?c:new a.constructor(c))},b.cycleToList=function c(a){var b,c=[],d,e,f,g,h,i;i=a.map(function(a){return Math.max.apply(null,a)}),i=Math.max.apply(null,i);for(e=0,f=i;e<=f;e++){d=e;for(g=0,h=a.length;g<h;g++)b=a[g].indexOf(d),++b&&(d=a[g][b%a[g].length]);c.push(d)}return c},b.id=new b([[]]),b.prototype.inverse=function(){var b=this.cycle.slice();return b.reverse().forEach(function(a){a.reverse()}),new a.Permutation(b)},b.listToCycle=function d(a){var b=[],c,d,e,f,g=[];for(d=0,e=a.length;d<e;d++){c=d,f=[];while(!b[c])b[c]=!0,f.push(c),c=a[c];f.length&&g.push(f)}return g},b.prototype.map=function(){return new this.constructor(Array.prototype.map.apply(this,arguments))},b.prototype.sgn=function(){var a=0,b;for(b=0;b<this.cycle.length;b++)a+=this.cycle[b].length;return a+=this.cycle.length,-2*(a%2)+1},b.prototype.times=function(a){var b=this;return a.map(function(a){return b[a]})},b.prototype.toMatrix=function(b){var c=[],d=[],e,f,g;b=b||this.length;for(f=0,g=b-1;f<g;f++)c.push(0);c=c.concat([1]).concat(c);for(f=0,g=b;f<g;f++)e=b-this.applyTo(f)-1,d.push(c.slice(e,e+b));return new a.Matrix(d)},b.prototype.toString=function(){var a="";return this.cycle.forEach(function(b){a+="("+b.toString()+")"}),a},b}();a.Permutation=u;var v=function(b){function c(a){arguments.length>1&&(a=Array.prototype.slice.call(arguments),a.push(1)),b.call(this,a),this.dim=2,this.type="point"}return __extends(c,b),c.prototype.crossRatio=function(b,c,d,e){var f=this.toArray(),g=new a.Matrix([f,b,d]),h=new a.Matrix([f,c,e]),i=new a.Matrix([f,b,e]),j=new a.Matrix([f,c,d]);return g.det()*h.det()/(i.det()*j.det())},c.prototype.distanceTo=function(a){var b=0,c;if(arguments.length===0){for(c=0;c<this.dim;c++)b+=Math.pow(this[c],2);return Math.sqrt(b)}if(a.type==="point"&&this.dim===a.dim)for(c=0;c<this.dim;c++)b+=Math.pow(this[c]-a[c],2);return Math.sqrt(b)},c.prototype.draw=function(a,b){if(Array.isArray(a)){var c=this;a.forEach(function(a){a.point(c,b)})}else a.point(this,b);return this},c.I=new c([new a.Complex(0,-1),0,1]),c.prototype.isEqual=function(b){var c=this.normalize();return b=b.normalize(),this.length!==b.length?!1:c.every(function(c,d){return a.isEqual(c,b[d])})},c.prototype.isFinite=function(b){return!a.isZero(this[this.length-1])},c.prototype.isInside=function(a){if(a.type==="circle")return this.distanceTo(a.center)<a.radius},c.prototype.isOn=function(a){if(a.type==="line")return this.distanceTo(a.center)===a.radius;if(a.type==="circle")return this.distanceTo(a.center)===a.radius},c.prototype.isOutside=function(a){if(a.type==="circle")return this.distanceTo(a.center)>a.radius},c.J=new c([new a.Complex(0,1),0,1]),c.prototype.lineTo=function(b){if(this.dim===2&&b.dim===2)return new a.Line(this,b)},c.prototype.normalize=function(a){var b=this[this.dim];return this.map(function(a){return a/b})},c.prototype.reflectAt=function(b){if(b.type==="point"&&this.dim===b.dim){var c=[],d,e=this.normalize();b=b.normalize();for(d=0;d<this.dim;d++)c.push(2*b[d]-e[d]);return c.push(1),new a.Point(c)}},c.prototype.slice=function(){return Array.prototype.slice.apply(this,arguments)},c.prototype.toArray=function(){var a=[],b,c;for(b=0,c=this.dim;b<=c;b++)a.push(this[b]);return a},c.prototype.toComplex=function(){if(this.dim===2)return new a.Complex(this[0]/this[2],this[1]/this[2])},c.prototype.toLaTeX=function(b){var c=b?this:this.normalize().slice(0,-1);return"\\begin{pmatrix}"+c.reduce(function(b,c){return b+"\\\\"+a.toLaTeX(c)})+"\\end{pmatrix}"},c.prototype.toMathMLString=function(b){var c=b?this:this.normalize().slice(0,-1);return c.reduce(function(b,c){return b+"<mtr><mtd>"+a.toMathMLString(c)+"</mtd></mtr>"},"<mrow><mo>(</mo><mtable>")+"</mtable><mo>)</mo></mrow>"},c.prototype.toString=function(b){var c=b?this:this.normalize().slice(0,-1);return"("+c.reduce(function(b,c){return b+", "+a.toString(c)})+")"},c}(p);a.Point=v;var w=function(){function b(b){var c=this;this.type="polynomial";var d=[];if(b===undefined||b.length===0)b=[0];else if(typeof b=="number"){while(b--)d.push(0);d.push(1),b=d}b.forEach(function(a,b){c[b]=a}),this.length=b.length,this.deg=b.length-1,this.subdeg=function(b){var c=0;if(b.length>1||b[0]){while(c<b.length&&a.isZero(b[c]))c++;return c}return Infinity}(b)}return b.prototype.content=function(){return a.gcd(this)},b.prototype.differentiate=function(b){if(b===0)return this;if(b<0)return this.integrate(-b);var c=[],d;b=b||1;for(d=0;d<=this.deg-b;d++)c[d]=a.times(this[d+b],a.fallingFactorial(d+b,b));return new a.Polynomial(c)},b.prototype.draw=function(a,b){var c=[],d,e=this;if(this.deg<2)Array.isArray(a)?a.forEach(function(a){a.line([[-50,e.valueAt(-50)],[50,e.valueAt(50)]],b)}):a.line([[-50,this.valueAt(-50)],[50,this.valueAt(50)]],b);else{for(d=-50;d<=50;d=Math.round((d+.01)*100)/100)c.push([d,this.valueAt(d)]);Array.isArray(a)?a.forEach(function(a){a.path(c,b)}):a.path(c,b)}return this},b.prototype.forEach=function(){return Array.prototype.forEach.apply(this,arguments)},b.prototype.integrate=function(b){var c=[],d;b=b||1;if(a.isZero(b))return this;if(b<0)return this.differentiate(-b);for(d=0;d<b;d++)c.push(0);for(d=0;d<=this.deg;d++)c[d+b]=this[d]/a.fallingFactorial(d+b,b);return new a.Polynomial(c)},b.prototype.interpolation=function(b,c){var d,e=new a.Polynomial([0]),f=b.length,g,h,i,j;arguments.length===2&&(b=b.map(function(a,b){return[a,c[b]]}));for(g=0;g<f;g++){d=new a.Polynomial([1]);for(h=0;h<f;h++)g!==h&&(d=d.times(new a.Polynomial([-b[h][0]/(b[g][0]-b[h][0]),1/(b[g][0]-b[h][0])])));e=e.plus(d.times(b[g][1]))}return e},b.prototype.isEqual=function(b){var c,d;if(this.deg!==b.deg||this.subdeg!==b.subdeg)return!1;for(c=0,d=this.deg;c<=d;c++)if(!a.isEqual(this[c],b[c]))return!1;return!0},b.prototype.isPrimitive=function(){return a.gcd(this)===1},b.prototype.isReal=function(){return this.every(a.isReal)},b.prototype.map=function(b){return new a.Polynomial(Array.prototype.map.call(this,b))},b.prototype.mod=function(b){return this.map(function(c){return a.mod(c,b)})},b.prototype.negative=function(){return new a.Polynomial(this.map(a.negative))},b.one=new b([1]),b.prototype.plus=function(b,c){var d=[],e;if(typeof b=="number"){if(c)return this.map(function(c){return a.plus(b,c)});d=this.slice(),d[0]=a.plus(d[0],b)}else if(b.type==="polynomial"){for(e=0;e<=Math.min(this.deg,b.deg);e++)d[e]=a.plus(this[e],b[e]);d=d.concat((this.deg>b.deg?this:b).slice(e))}return new a.Polynomial(d)},b.regression=function c(b,c){var d=b.length,e=0,f=0,g=0,h=0,i,j,k;if(arguments.length===2)for(k=0;k<d;k++)e+=b[k]*c[k],f+=b[k],g+=c[k],h+=b[k]*b[k];else for(k=0;k<d;k++)e+=b[k][0]*b[k][1],f+=b[k][0],g+=b[k][1],h+=b[k][0]*b[k][0];return i=(d*e-f*g)/(d*h-f*f),j=(g*h-e*f)/(d*h-f*f),new a.Polynomial([j,i])},b.roots=function d(d){var b,c=[],e,f;a.type(d)==="array"&&(d=a.set(d,!0)),b=d.powerset();for(e=0,f=d.card;e<f;e++)c[e]=0;return b.slice(1).forEach(function(b,d){c[f-b.card]=a.plus(c[f-b.card],b.times())}),c=c.map(function(b,c){return(f-c)%2?a.negative(b):b}),c.push(1),new a.Polynomial(c)},b.prototype.slice=function(){return Array.prototype.slice.apply(this,arguments)},b.prototype.tangent=function(b){var c=this.valueAt(b),d=this.differentiate().valueAt(b);return new a.Polynomial([c-d*b,d])},b.prototype.times=function(b){var c=[],d,e;if(b.type==="polynomial")for(d=0;d<=this.deg;d++)for(e=0;e<=b.deg;e++)c[d+e]=a.plus(c[d+e]?c[d+e]:0,a.times(this[d],b[e]));else c=this.map(function(c){return a.times(b,c)});return new a.Polynomial(c)},b.prototype.toContentMathMLString=function(b){var c="<apply><plus/>",d;for(d=this.deg;d>=0;d--)a.isZero(this[d])||(d===0?c+=a.toContentMathMLString(this[d]):c+="<apply><times/>"+a.toContentMathMLString(this[d],!0),d>1?c+="<apply><power/><ci>x</ci>"+a.toContentMathMLString(d)+"</apply></apply>":d===1&&(c+="<ci>x</ci></apply>"));return c+="</apply>",b&&(c='<math xmlns="http://www.w3.org/1998/Math/MathML"><lambda><bvar><ci>x</ci></bvar><domainofapplication><complexes/></domainofapplication>'+c+"</lambda></math>"),c},b.prototype.toFunctn=function(){var b="",c,d;for(c=0,d=this.deg;c<=d;c++)a.isZero(this[c])||(c===0?b+=a.toString(this[c]):b+=a.toString(this[c],!0),c>1?b+="* Math.pow(x,"+a.toString(c)+")":c===1&&(b+="*x"));return a.functn(new Function("x","return "+b),{contentMathMLString:this.toContentMathMLString(!0)})},b.prototype.toLaTeX=function(){var b=a.toString(this[this.deg])+"*x^{"+this.deg+"}",c;for(c=this.deg-1;c>=0;c--)a.isZero(this[c])||(b+=a.toLaTeX(this[c],!0),c>1?b+="x^{"+a.toLaTeX(c)+"}":c===1&&(b+="x"));return b},b.prototype.toMathMLString=function(b){var c="<mrow>"+a.toMathMLString(this[this.deg],!0)+"<mo>&#x2062;</mo><msup><mi>x</mi>"+a.toMathMLString(this.deg)+"</msup>",d;for(d=this.deg-1;d>=0;d--)a.isZero(this[d])||(c+=a.toMathMLString(this[d],!0),d>1?c+="<mo>&#x2062;</mo><msup><mi>x</mi>"+a.toMathMLString(d)+"</msup>":d===1&&(c+="<mo>&#x2062;</mo><mi>x</mi>"));return c+="</mrow>",b&&(c='<math xmlns="http://www.w3.org/1998/Math/MathML">'+c+"</math>"),c},b.prototype.toString=function(b){var c=a.toString(this[this.deg])+"*x^"+this.deg,d;for(d=this.deg-1;d>=0;d--)a.isZero(this[d])||(c+=a.toString(this[d],!0),d>1?c+="*x^"+a.toString(d):d===1&&(c+="*x"));return c},b.prototype.valueAt=function(b){var c=a.is(b,"matrix")?a.Matrix.identity(b.rows,b.cols):1,d=a.is(b,"matrix")?a.Matrix.zero(b.rows,b.cols):0,e,f;for(e=0,f=this.deg;e<=f;e++)d=a.plus(d,a.times(this[e],c)),c=a.times(c,b);return d},b.zero=new b([0]),b}();a.Polynomial=w;var x=function(){function b(c){var d=this;this.type="set",this.union=b.createSetOperation(!0,!0,!0),this.intersect=b.createSetOperation(!1,!0,!1),this.without=b.createSetOperation(!0,!1,!1),this.xor=b.createSetOperation(!0,!1,!0),c||(c=[]),c=c.sort(a.compare),c=c.filter(function(a,b,c){return a!==c[b+1]}),c.forEach(function(a,b){d[b]=a}),this.length=c.length,this.card=c.length}return b.prototype.compare=function(b){if(this.card!==b.card)return a.sign(this.card-b.card);var c=0,d=!1;return this.forEach(function(e,f){if(!d){var g=a.compare(e,b[f]);g!==0&&(c=g,d=!0)}}),c},b.prototype.every=function(){return Array.prototype.every.apply(this,arguments)},b.prototype.filter=function(){return new a.Set(Array.prototype.filter.apply(this,arguments))},b.prototype.forEach=function(){Array.prototype.forEach.apply(this,arguments)},b.fromTo=function(b,c,d){var e,f=[];d=d||1;if(b<=c){for(e=b;e<=c;e+=d)f.push(e);return new a.Set(f)}},b.prototype.indexOf=function(){return Array.prototype.indexOf.apply(this,arguments)},b.prototype.insert=function(a){var b=this.locate(a);return this[b]!==a&&(this.splice(b,0,a),this.card++),this},b.prototype.isEmpty=function(){return this.card===0},b.prototype.isEqual=function(b){return this.card!==b.card?!1:this.every(function(c,d){return a.isEqual(c,b[d])})},b.prototype.isSubsetOf=function(a){return this.every(function(b){return a.indexOf(b)!==-1})},b.prototype.locate=function(a){var b=0,c=this.card-1,d,e=this.indexOf(a);if(e!==-1)return e;while(b<=c){d=b+Math.floor((c-b)/2);if(this[d]<a)b=d+1;else if(this[d]>a)c=d-1;else return d}return b},b.prototype.map=function(b){return new a.Set(Array.prototype.map.call(this,b))},b.prototype.plus=function(b){var c=[];return arguments.length?b.type==="set"?(this.forEach(function(d){b.forEach(function(b){c.push(a.plus(d,b))})}),new a.Set(c)):this.map(function(c){return a.plus(c,b)}):a.plus.apply(null,this)},b.prototype.powerset=function(b){var c=[],d,e,f,g,h,i;for(f=0,g=Math.pow(2,this.card);f<g;f++){d=f.toString(2).split("").reverse(),e=[];for(h=0,i=this.card;h<i;h++)d[h]==="1"&&e.push(this[h]);c.push(new a.Set(e))}return new a.Set(c)},b.prototype.reduce=function(){return Array.prototype.reduce.apply(this,arguments)},b.prototype.remove=function(a){var b=this.indexOf(a);return b!==-1&&(this.splice(b,1),this.card--),this},b.createSetOperation=function(b,c,d){return function(e){var f=[],g=0,h=0,i=this.card,j=e.card;while(g<i&&h<j){if(this[g]<e[h]){b&&f.push(this[g]),g++;continue}if(this[g]>e[h]){d&&f.push(e[h]),h++;continue}if(this[g]===e[h]){c&&f.push(this[g]),g++,h++;continue}}return b&&h===j?f=f.concat(this.slice(g)):d&&g===i&&(f=f.concat(e.slice(h))),new a.Set(f)}},b.prototype.slice=function(){return Array.prototype.slice.apply(this,arguments)},b.prototype.splice=function(){return Array.prototype.splice.apply(this,arguments)},b.prototype.times=function(b){return arguments.length?this.map(function(c){return a.times(c,b)}):a.times.apply(null,this)},b.prototype.toArray=function(){return Array.prototype.slice.call(this)},b.prototype.toContentMathMLString=function(){return this.isEmpty()?"<emptyset/>":this.reduce(function(b,c){return b+a.toContentMathMLString(c)},"<set>")+"</set>"},b.prototype.toLaTeX=function(){return this.isEmpty()?"\\emptyset":this.reduce(function(b,c){return b+a.toLaTeX(c)+", "},"\\{").slice(0,-2)+"\\}"},b.prototype.toMathMLString=function(){return this.isEmpty()?"<mi>&#x2205;</mi>":this.reduce(function(b,c){return b+a.toMathMLString(c)+"<mo>,</mo>"},"<mrow><mo>{</mo>").slice(0,-10)+"<mo>}</mo></mrow>"},b.prototype.toString=function(){return this.isEmpty()?"∅":"("+Array.prototype.join.call(this,", ")+")"},b}();a.Set=x})(MathLib||(MathLib={}));