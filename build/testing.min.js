/* MathLib v0.1 MathLib.de | MathLib.de/license *//*********************************************** 
     Begin general.js 
***********************************************/module("MathLib");test("general",1,function(){equals(typeof MathLib,"object","is MathLib defined")});test("abs",3,function(){equals(MathLib.abs(42),42);equals(MathLib.abs(-6),6);equals(MathLib.abs(MathLib.complex([3,4])),5)});test("arccos",3,function(){equals(MathLib.arccos(0),Math.PI/2);equals(MathLib.arccos(1),0);deepEqual(MathLib.arccos(MathLib.complex([3,4])),MathLib.complex([.9368124611557207,-2.305509031243477]))});test("arcsin",3,function(){equals(MathLib.arcsin(0),0);equals(MathLib.arcsin(1),Math.PI/2);deepEqual(MathLib.arcsin(MathLib.complex([3,4])),MathLib.complex([.6339838656391759,2.305509031243477]))});test(".binomial",4,function(){equals(MathLib.binomial(0,0),1);equals(MathLib.binomial(6,3),20);equals(MathLib.binomial(2,4),0);equals(MathLib.binomial(-4,3),-20)});test(".compare",3,function(){equals(MathLib.compare(12,12),0);equals(MathLib.compare(1,2),-1);equals(MathLib.compare(23,MathLib.complex([3,4])),1)});test(".exp",2,function(){equals(MathLib.exp(0),1);equals(MathLib.exp(1),MathLib.e)});test(".hypot",2,function(){equals(MathLib.hypot(3,4),5);equals(MathLib.hypot(3,4,12),13)});test(".factor",2,function(){deepEqual(MathLib.factor(12),MathLib.set([2,2,3],!0));deepEqual(MathLib.factor(-15),MathLib.set([3,5],!0))});test(".factorial",1,function(){equal(MathLib.factorial(6),720)});test(".fallingFactorial",4,function(){equals(MathLib.fallingFactorial(2,0),1);equals(MathLib.fallingFactorial(6,3),120);equals(MathLib.fallingFactorial(2,4),0);equals(MathLib.fallingFactorial(4,3,.5),42)});test(".fibonacci",1,function(){equals(MathLib.fibonacci(4),3,"Is the fourth fibonacci number 3?")});test(".floor",2,function(){equals(MathLib.floor(2.5),2);equals(MathLib.floor(-2.5),-3)});test(".inverse",1,function(){equals(MathLib.inverse(2),.5)});test(".is",7,function(){var a=MathLib.point([1,2,3]);equals(MathLib.is(2,"number"),!0);equals(MathLib.is(a,"point"),!0);equals(MathLib.is(a,"vector"),!0);equals(MathLib.is(a,"array"),!0);equals(MathLib.is(a,"object"),!0);equals(MathLib.is(a,"line"),!1);equals(MathLib.is([],"array"),!0)});test(".isFinite",3,function(){equals(MathLib.isFinite(2),!0);equals(MathLib.isFinite(Infinity),!1);equals(MathLib.isFinite(-Infinity),!1)});test(".isInt",2,function(){equals(MathLib.isInt(2),!0);equals(MathLib.isInt(2.5),!1)});test(".isOne",2,function(){equals(MathLib.isOne(1),!0);equals(MathLib.isOne(2),!1)});test(".isPrime",2,function(){equals(MathLib.isPrime(4567),!0);equals(MathLib.isPrime(112),!1)});test(".isZero",2,function(){equals(MathLib.isZero(0),!0);equals(MathLib.isZero(1),!1)});test(".max()",2,function(){equals(MathLib.max([1,42,17,4]),42);equals(MathLib.max([1,42,17,4],2),17)});test("risingFactorial",3,function(){equals(MathLib.risingFactorial(2,0),1);equals(MathLib.risingFactorial(2,3),24);equals(MathLib.risingFactorial(3,4,.5),189)});test("sin",3,function(){equals(MathLib.sin(0),0);equals(MathLib.sin(Math.PI/2),1);ok(MathLib.isEqual(MathLib.sin(MathLib.complex([3,4])),MathLib.complex([3.853738037919377,-27.016813258003932])))});test("type",3,function(){equals(MathLib.type(42),"number");equals(MathLib.type([6,3]),"array");equals(MathLib.type(MathLib.complex([2,3])),"complex")});module("Circle");test("init",2,function(){var a=MathLib.point(1,2),b=MathLib.circle(a,2);equals(b.radius,2,"Testing the radius");deepEqual(b.center,a,"Testing the center")});test("area",1,function(){var a=MathLib.point(1,2),b=MathLib.circle(a,2);equals(MathLib.isEqual(b.area(),4*MathLib.pi),!0,".area()")});test("circumference",1,function(){var a=MathLib.point(1,2),b=MathLib.circle(a,2);equals(MathLib.isEqual(b.circumference(),4*MathLib.pi),!0,".circumference()")});test(".isContaining()",3,function(){var a=MathLib.point(1,2),b=MathLib.point(2,3),c=MathLib.point(1,4),d=MathLib.point(2,4),e=MathLib.circle(a,2);ok(e.isContaining(b),"Point inside the circle");ok(!e.isContaining(c),"Point on the circle");ok(!e.isContaining(d),"Point outside the circle")});test(".isEqual()",2,function(){var a=MathLib.circle(MathLib.point(1,2),2),b=MathLib.circle(MathLib.point(1,2),3),c=MathLib.circle(MathLib.point([2,4,2]),2);equals(a.isEqual(b),!1,".isEqual()");equals(a.isEqual(c),!0,".isEqual()")});test(".reflectAt()",2,function(){var a=MathLib.point(1,2),b=MathLib.point(3,7),c=MathLib.circle(a,2),d=c.reflectAt(b);equals(d.radius,2,"Checking the radius.");deepEqual(d.center,MathLib.point(5,12),"Checking the center.")});test("constructor",1,function(){var a=MathLib.circle(MathLib.point([2,4,2]),2);equals(a.constructor,MathLib.circle,"Testing .constructor")});test("type",1,function(){var a=MathLib.circle(MathLib.point([2,4,2]),2);equals(a.type,"circle","Testing .type")});module("Complex");test("init (1 Array)",3,function(){var a=MathLib.complex([1,2]);equals(a.re,1,"Testing the real part");equals(a.im,2,"Testing the complex part");deepEqual(a.z,[1,2],"Testing the complete complex number")});test("init (2 Numbers)",3,function(){var a=MathLib.complex(3,2);equals(a.re,3*Math.cos(2),"Testing the real part");equals(a.im,3*Math.sin(2),"Testing the complex part");deepEqual(a.z,[3*Math.cos(2),3*Math.sin(2)],"Testing the complete complex number")});test(".abs()",1,function(){var a=MathLib.complex([3,4]);equals(5,a.abs(),"Absolut value of the complex number")});test(".argument()",3,function(){var a=MathLib.complex([1,1]),b=MathLib.complex([1,-1]),c=MathLib.complex([0,0]);equals(a.argument(),.7853981633974483,"");equals(b.argument(),5.497787143782138,"");equals(c.argument(),0,"")});test(".compare()",3,function(){var a=MathLib.complex([3,2]),b=MathLib.complex([1,1]),c=MathLib.complex([-1,1]);equals(a.compare(a),0,"equal complex numbers");equals(a.compare(b),1,"normal compare");equals(b.compare(c),-1,"")});test(".conjugate()",1,function(){var a=MathLib.complex([3,4]);deepEqual([3,-4],a.conjugate().z,"Checking the conjugate of a complex number")});test(".divide()",2,function(){var a=MathLib.complex([3,6]),b=MathLib.complex([2,5]),c=MathLib.complex([3,7]);deepEqual(a.divide(3),MathLib.complex([1,2]),"Dividing by a normal number.");ok(b.divide(c).isEqual(MathLib.complex([41/58,1/58])),"Dividing by a complex number.")});test(".inverse()",2,function(){var a=MathLib.complex([3,4]),b=MathLib.complex([0,2]);deepEqual(a.inverse(),MathLib.complex([.12,-0.16]),"Checking the inverse of a complex number");deepEqual(b.inverse(),MathLib.complex([0,-0.5]),"Checking the inverse of a complex number")});test(".isEqual()",2,function(){var a=MathLib.complex([3,4]),b=MathLib.complex([3,4]),c=MathLib.complex([5,3]);equals(a.isEqual(b),!0,"equal number");equals(b.isEqual(c),!1,"different number")});test(".isFinite()",2,function(){var a=MathLib.complex([3,4]),b=MathLib.complex([Infinity,0]);equals(a.isFinite(),!0,"finite complex number");equals(b.isFinite(),!1,"infinte complex number")});test(".isOne()",2,function(){var a=MathLib.complex([3,4]),b=MathLib.complex([1,0]);equals(a.isOne(),!1,"3+4i");equals(b.isOne(),!0,"complex one")});test(".isReal()",2,function(){var a=MathLib.complex([3,4]),b=MathLib.complex([3,0]);equals(a.isReal(),!1,"3+4i");equals(b.isReal(),!0,"3+0i")});test(".isZero()",2,function(){var a=MathLib.complex([3,4]),b=MathLib.complex([0,0]);equals(a.isZero(),!1,"non zero complex");equals(b.isZero(),!0,"complex zero")});test(".ln()",1,function(){var a=MathLib.complex([3,4]),b=MathLib.complex([1.6094379124341003,.9272952180016123]);deepEqual(a.ln(),b,"natural logarithm of the complex number")});test(".mod()",1,function(){var a=MathLib.complex([5,6]),b=MathLib.complex([2,0]);equals(a.mod(3).isEqual(b),!0,".mod()")});test(".minus()",1,function(){var a=MathLib.complex([3,-4]),b=MathLib.complex([7,-8]);deepEqual(a.minus(b),MathLib.complex([-4,4]),"Checking the negative of a complex number")});test(".negative()",1,function(){var a=MathLib.complex([3,-4]);deepEqual([-3,4],a.negative().z,"Checking the negative of a complex number")});test(".plus()",2,function(){var a=MathLib.complex([3,4]),b=MathLib.complex([2,-5]);deepEqual([5,-1],a.plus(b).z,"Adding two complex numbers.");deepEqual([8,4],a.plus(5).z,"Adding a number to a complex numbers.")});test(".sgn()",1,function(){var a=MathLib.complex([5,6]),b=MathLib.complex(1,Math.atan2(6,5));equals(a.sgn().isEqual(b),!0,".sgn()")});test(".times()",2,function(){var a=MathLib.complex([2,5]),b=MathLib.complex([3,7]);deepEqual([6,15],a.times(3).z,"Multiplying by a normal number.");deepEqual([-29,29],a.times(b).z,"Multiplying by a complex number.")});test(".toContentMathML()",5,function(){var a=MathLib.complex([3,4]),b=MathLib.complex([0,7]),c=MathLib.complex([4,0]),d=MathLib.complex([4,-5]),e=MathLib.complex([0,0]);equals(a.toContentMathML(),'<cn type="complex-cartesian">3<sep/>4</cn>',"Normal complex number.");equals(b.toContentMathML(),'<cn type="complex-cartesian">0<sep/>7</cn>',"Real part is zero.");equals(c.toContentMathML(),'<cn type="complex-cartesian">4<sep/>0</cn>',"Complex part is zero.");equals(d.toContentMathML(),'<cn type="complex-cartesian">4<sep/>-5</cn>',"Complex part is negative.");equals(e.toContentMathML(),'<cn type="complex-cartesian">0<sep/>0</cn>',"Number is zero.")});test(".toLaTeX()",5,function(){var a=MathLib.complex([3,4]),b=MathLib.complex([0,7]),c=MathLib.complex([4,0]),d=MathLib.complex([4,-5]),e=MathLib.complex([0,0]);equals(a.toLaTeX(),"3+4i","Normal complex number.");equals(b.toLaTeX(),"7i","Real part is zero.");equals(c.toLaTeX(),"4","Complex part is zero.");equals(d.toLaTeX(),"4-5i","Complex part is negative.");equals(e.toLaTeX(),"0","Number is zero.")});test(".toMathML()",5,function(){var a=MathLib.complex([3,4]),b=MathLib.complex([0,7]),c=MathLib.complex([4,0]),d=MathLib.complex([4,-5]),e=MathLib.complex([0,0]);equals(a.toMathML(),"<mn>3</mn><mo>+</mo><mn>4</mn><mo>&#x2062;</mo><mi>i</mi>","Normal complex number.");equals(b.toMathML(),"<mn>7</mn><mo>&#x2062;</mo><mi>i</mi>","Real part is zero.");equals(c.toMathML(),"<mn>4</mn>","Complex part is zero.");equals(d.toMathML(),"<mn>4</mn><mo>-</mo><mn>5</mn><mo>&#x2062;</mo><mi>i</mi>","Complex part is negative.");equals(e.toMathML(),"<mn>0</mn>","Number is zero.")});test(".toMatrix()",2,function(){var a=MathLib.complex([3,-4]);equals(a.toMatrix().type,"matrix","type check");deepEqual(a.toMatrix().toComplex().z,[3,-4],"back transformation")});test(".toPoint()",3,function(){var a=MathLib.complex([3,-4]),b=a.toPoint();equals(b.type,"point","Converting a complex number to a point: type check");equals(b.dim,2,"Converting a complex number to a point: dimension check.");deepEqual(b,MathLib.point([3,-4,1]),"Converting a complex number to a point: position check.")});test(".toString()",5,function(){var a=MathLib.complex([3,4]),b=MathLib.complex([0,7]),c=MathLib.complex([4,0]),d=MathLib.complex([4,-5]),e=MathLib.complex([0,0]);equals(a.toString(),"3+4i","Normal complex number.");equals(b.toString(),"7i","Real part is zero.");equals(c.toString(),"4","Complex part is zero.");equals(d.toString(),"4-5i","Complex part is negative.");equals(e.toString(),"0","Number is zero.")});test("constructor",1,function(){var a=MathLib.complex([3,4]);equals(a.constructor,MathLib.complex,"Testing .constructor")});test("one",1,function(){var a=MathLib.complex.one;deepEqual(a,MathLib.complex([1,0]),".one")});test("type",1,function(){var a=MathLib.complex([3,4]);equals(a.type,"complex","Testing .type")});test("zero",1,function(){var a=MathLib.complex.zero;deepEqual(a,MathLib.complex([0,0]),".zero")});module("Line");test("init",2,function(){var a=MathLib.line([3,2,1]);equals(a.dim,2,"Testing the dimension");deepEqual(a,[3,2,1],"Testing the entries")});test(".isEqual",3,function(){var a=MathLib.line([3,2,1]),b=MathLib.line([6,4,2]),c=MathLib.line([1,1,1]),d=MathLib.line([1,1,1,1]);equals(a.isEqual(b),!0,".isEqual()");equals(a.isEqual(c),!1,".isEqual()");equals(c.isEqual(d),!1,".isEqual()")});test(".isFinite",2,function(){var a=MathLib.line([3,2,1]),b=MathLib.line([6,4,0]);equals(a.isFinite(),!0,".isFinite()");equals(b.isFinite(),!1,".isFinite()")});test(".map()",2,function(){var a=MathLib.line([1,2,3]),b=MathLib.line([2,4,6]),c=function(a){return 2*a},d=a.map(c);deepEqual(d,b,".map()");equals(d.type,"line",".type should be line")});test(".toLaTeX",1,function(){var a=MathLib.line([3,2,1]);equals(a.toLaTeX(),"\\begin{pmatrix}\n\t3\\\\\n\t2\\\\\n\t1\n\\end{pmatrix}",".toLaTeX()")});test(".toMathML",1,function(){var a=MathLib.line([3,2,1]);equals(a.toMathML(),"<mrow><mo>(</mo><mtable><mtr><mtd><mn>3</mn></mtd></mtr><mtr><mtd><mn>2</mn></mtd></mtr><mtr><mtd><mn>1</mn></mtd></mtr></mtable><mo>)</mo></mrow>",".toMathML()")});test(".toString",1,function(){var a=MathLib.line([3,2,1]);equals(a.toString(),"(3, 2, 1)",".toString()")});test("constructor",1,function(){var a=MathLib.line([3,2,1]);equals(a.constructor,MathLib.line,"Testing .constructor")});test("type",1,function(){var a=MathLib.line([3,2,1]);equals(a.type,"line","Testing .type")});module("MathML");test("init",2,function(){var a=MathLib.MathML("<matrix><matrixrow><cn>1</cn><cn>0</cn></matrixrow><matrixrow><cn>0</cn><cn>1</cn></matrixrow></matrix>"),b=function(a){var b=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:function(a){return NodeFilter.FILTER_ACCEPT}},!1),c=[];while(b.nextNode())c.push(b.currentNode.nodeName);return c};equals(typeof a,"object","Testing typeof the MathML");deepEqual(b(a),["matrix","matrixrow","cn","cn","matrixrow","cn","cn"],"Checking if the MathML was tokenized right.")});test(".isSupported()",1,function(){var a=MathLib.MathML.isSupported();ok(a===!0||a===!1,".isEqual()")});test(".parse()",11,function(){var a=MathLib.MathML("<matrix><matrixrow><cn>1</cn><cn>0</cn><cn>0</cn></matrixrow><matrixrow><cn>0</cn><cn>1</cn><cn>0</cn></matrixrow><matrixrow><cn>0</cn><cn>0</cn><cn>1</cn></matrixrow></matrix>"),b=MathLib.MathML('<cn type="complex-cartesian">3<sep/>4</cn>'),c=MathLib.MathML('<cn type="complex-polar">1<sep/>3.141592653589793</cn>'),d=MathLib.MathML("<set><cn>1</cn><cn>2</cn><cn>3</cn><cn>4</cn><cn>5</cn><cn>6</cn><cn>7</cn><cn>8</cn><cn>9</cn><cn>10</cn></set>"),e=MathLib.MathML('<set type="multiset"><cn>1</cn><cn>2</cn><cn>3</cn><cn>3</cn><cn>3</cn><cn>2</cn><cn>4</cn></set>'),f=MathLib.MathML("<vector><cn>1</cn><cn>2</cn><cn>3</cn></vector>"),g=MathLib.MathML("<set><cs>A</cs><cs>B</cs><cs> </cs></set>"),h=MathLib.MathML("<apply><ln/><cn>42</cn></apply>"),i=MathLib.MathML("<apply><scalarproduct/><vector><cn>1</cn><cn>2</cn><cn>3</cn></vector><vector><cn>4</cn><cn>5</cn><cn>6</cn></vector></apply>"),j=MathLib.MathML("<apply><determinant/><matrix><matrixrow><cn>8</cn><cn>1</cn><cn>6</cn></matrixrow><matrixrow><cn>3</cn><cn>5</cn><cn>7</cn></matrixrow><matrixrow><cn>4</cn><cn>9</cn><cn>2</cn></matrixrow></matrix></apply>"),k=MathLib.MathML("<apply><union/><set><cn>1</cn><cn>2</cn><cn>3</cn></set><set><cn>3</cn><cn>4</cn><cn>5</cn></set></apply>");deepEqual(b.parse(),MathLib.complex([3,4]),".parse() complex (cartesian)");deepEqual(c.parse(),MathLib.complex(1,3.141592653589793),".parse() complex (polar)");deepEqual(a.parse(),MathLib.matrix([[1,0,0],[0,1,0],[0,0,1]]),".parse() matrix");deepEqual(d.parse(),MathLib.set.fromTo(1,10),".parse() set");deepEqual(e.parse(),MathLib.set([1,2,2,3,3,3,4],!0),".parse() set");deepEqual(f.parse(),MathLib.vector([1,2,3]),".parse() vector");deepEqual(g.parse(),MathLib.set(["A","B"," "]),".parse() cs");deepEqual(h.parse(),Math.log(42),".parse() apply");deepEqual(i.parse(),32,".parse() apply");deepEqual(j.parse(),-360,".parse() apply");deepEqual(k.parse(),MathLib.set([1,2,3,4,5]),".parse() apply")});test("constructor",1,function(){var a=MathLib.MathML('<cn type="complex-cartesian">3<sep/>4</cn>');deepEqual(a.constructor,MathLib.MathML,"Testing .constructor; This test fails in Safari. This constructor is not used by MathLib.js")});test("type",1,function(){var a=MathLib.MathML('<cn type="complex-cartesian">3<sep/>4</cn>');equals(a.type,"MathML","Testing .type")});module("Matrix");test("init",2,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]);equals(a.rows,3,"Testing the number of rows");equals(a.cols,3,"Testing the number of cols")});test(".adjugate()",1,function(){var a=MathLib.complex,b=MathLib.matrix([[-3,2,-5],[-1,0,-3],[3,-4,1]]),c=MathLib.matrix([[-12,18,-6],[-8,12,-4],[4,-6,2]]);deepEqual(b.adjugate(),c,"Adjoint matrix of a complex 2x3 matrix")});test(".adjoint()",1,function(){var a=MathLib.complex,b=MathLib.matrix([[a([3,1]),5,a([0,-2])],[a([2,-2]),a([0,1]),a([-7,-13])]]),c=MathLib.matrix([[a([3,-1]),a([2,2])],[5,a([0,-1])],[a([0,2]),a([-7,13])]]);deepEqual(b.adjoint(),c,"Adjoint matrix of a complex 2x3 matrix")});test(".cholesky()",1,function(){var a=MathLib.matrix([[25,15,-5],[15,18,0],[-5,0,11]]),b=MathLib.matrix([[5,0,0],[3,3,0],[-1,1,3]]);deepEqual(a.cholesky(),b,"Cholesky decomposition of  3x3 matrix")});test(".determinant()",3,function(){var a=MathLib.matrix([[0,1,2],[3,2,1],[1,1,0]]),b=MathLib.matrix([[42]]),c=MathLib.matrix([[0,1,2],[3,2,1]]);equals(a.determinant(),3,"Determinant of a 3x3 matrix");equals(b.determinant(),42,"Determinant of 1x1 matrix");equals(c.determinant(),undefined,"Determinant of 2x3 matrix should be undefined")});test(".isDiag()",2,function(){var a=MathLib.complex(0,0),b=MathLib.matrix([[1,0,0],[0,5,0],[0,0,9]]),c=MathLib.matrix([[1,4,7],[2,5,8],[2,5,8]]);equals(b.isDiag(),!0,"square matrix");equals(c.isDiag(),!1,"non square matrix")});test(".isIdentity()",2,function(){var a=MathLib.matrix([[1,0,0],[0,1,0],[0,0,1]]),b=MathLib.matrix([[1,4,7],[2,5,8],[2,5,8]]);equals(a.isIdentity(),!0,".isIdentity() on identity matrix");equals(b.isIdentity(),!1,".isIdentity() on non identity matrix")});test(".isInvertible()",2,function(){var a=MathLib.matrix([[1,4,7],[2,5,8],[2,5,2]]),b=MathLib.matrix([[1,4,7],[2,5,8],[3,9,15]]);equals(a.isInvertible(),!0,".isInvertible(), invertible matrix");equals(b.isInvertible(),!1,".isInvertible(), singular matrix")});test(".isLower()",4,function(){var a=MathLib.matrix([[1,0,0],[4,5,0],[3,0,9]]),b=MathLib.matrix([[1,4,7],[2,5,8],[3,5,6]]),c=MathLib.matrix([[1,0,0],[4,5,0]]),d=MathLib.matrix([[1,0,0],[4,5,0],[4,0,6],[4,3,2]]);equals(a.isLower(),!0,"upper matrix");equals(b.isLower(),!1,"non upper matrix");equals(c.isLower(),!0,"upper matrix");equals(d.isLower(),!0,"upper matrix")});test(".isOrthogonal()",2,function(){var a=MathLib.matrix([[.8,-0.6],[.6,.8]]),b=MathLib.matrix([[1,4,7],[2,5,8],[2,5,8]]);equals(a.isOrthogonal(),!0,".isOrthogonal() on orthogal matrix");equals(b.isOrthogonal(),!1,".isOrthogonal() on non orthogonal matrix")});test(".isPermutation()",3,function(){var a=MathLib.matrix([[0,1,0],[1,0,0],[0,0,1]]),b=MathLib.matrix([[1,4,7],[2,5,8],[2,3,4]]),c=MathLib.matrix([[0,1,0],[1,0,0],[0,0,0]]);equals(a.isPermutation(),!0,"permutation matrix");equals(b.isPermutation(),!1,"non permutation matrix");equals(c.isPermutation(),!1,"zero line")});test(".isPosDefinite()",2,function(){var a=MathLib.matrix([[2,-1,0],[-1,2,-1],[0,-1,2]]),b=MathLib.matrix([[1,2],[2,1]]);equals(a.isPosDefinite(),!0,"positiv definite matrix");equals(b.isPosDefinite(),!1,"non positiv definite matrix")});test(".isSquare()",2,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]),b=MathLib.matrix([[1,4,7],[2,5,8]]);equals(a.isSquare(),!0,"square matrix");equals(b.isSquare(),!1,"non square matrix")});test(".isSymmetric()",2,function(){var a=MathLib.complex(4,0),b=MathLib.matrix([[1,7,a],[7,0,3],[4,3,1]]),c=MathLib.matrix([[0,0,0],[0,1,a],[0,0,0]]);equals(b.isSymmetric(),!0,"symmetric matrix");equals(c.isSymmetric(),!1,"non symmetric matrix")});test(".isUpper()",4,function(){var a=MathLib.matrix([[1,2,3],[0,5,6],[0,0,9]]),b=MathLib.matrix([[1,4,7],[2,5,8],[3,5,6]]),c=MathLib.matrix([[1,4,7],[0,5,8]]),d=MathLib.matrix([[1,4,7],[0,5,8],[0,0,6],[0,0,0]]);equals(a.isUpper(),!0,"upper matrix");equals(b.isUpper(),!1,"non upper matrix");equals(c.isUpper(),!0,"upper matrix");equals(d.isUpper(),!0,"upper matrix")});test(".isVector()",2,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]),b=MathLib.matrix([[1,2,3]]);equals(a.isVector(),!1,"normal matrix");equals(b.isVector(),!0,"one row matrix")});test(".isZero()",2,function(){var a=MathLib.complex(0,0),b=MathLib.matrix([[0,0,0],[0,0,a],[0,0,0]]),c=MathLib.matrix([[0,0,0],[0,1,a],[0,0,0]]);equals(b.isZero(),!0,"zero matrix");equals(c.isZero(),!1,"non zero matrix")});test(".LU()",2,function(){var a=MathLib.matrix([[1,2,3],[1,1,1],[3,3,1]]),b=MathLib.matrix([[1,3,5],[2,4,7],[1,1,0]]),c=MathLib.matrix([[1,2,3],[1,-1,-2],[3,3,-2]]),d=MathLib.matrix([[2,4,7],[.5,1,1.5],[.5,-1,-2]]);deepEqual(a.LU(!0),c,"LU decomposition");deepEqual(b.LU(),d,"LU decomposition")});test(".map()",2,function(){var a=MathLib.matrix([[1,2],[3,4]]),b=MathLib.matrix([[2,4],[6,8]]),c=function(a){return 2*a},d=a.map(c);deepEqual(d,b,".map()");equals(d.type,"matrix",".type should be matrix")});test(".minus()",2,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]),b=MathLib.matrix([[1,4,7],[2,5,8],[3,6,9]]),c=MathLib.matrix([[0,-2,-4],[2,0,-2],[4,2,0]]),d=MathLib.matrix([[0,0,0],[0,0,0],[0,0,0]]);deepEqual(a.minus(b),c,"subtracting two simple matrices");deepEqual(b.minus(b),d,"subtracting two simple matrices")});test(".negative()",1,function(){var a=MathLib.matrix([[1,4,7],[2,5,8],[3,6,9]]),b=MathLib.matrix([[-1,-4,-7],[-2,-5,-8],[-3,-6,-9]]);deepEqual(a.negative(),b,"negative of a simple matrix")});test(".plus()",1,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]),b=MathLib.matrix([[1,4,7],[2,5,8],[3,6,9]]),c=MathLib.matrix([[2,6,10],[6,10,14],[10,14,18]]);deepEqual(a.plus(b),c,"adding two simple matrices")});test(".rank()",2,function(){var a=MathLib.matrix([[1,2,3],[0,5,4],[0,10,2]]),b=MathLib.matrix([[1,2,3],[0,6,4],[0,3,2]]);equals(a.rank(),3,".rank()");equals(b.rank(),2,".rank()")});test(".remove()",3,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]),b=MathLib.matrix([[1,2,3],[7,8,9]]),c=MathLib.matrix([[1,3],[4,6],[7,9]]),d=MathLib.matrix([[4],[7]]);deepEqual(a.remove(1),b,"removing the second row");deepEqual(a.remove(!1,1),c,"removing the second column");deepEqual(a.remove([0],[1,2]),d,"removing the first row and the second and third col")});test(".rref()",2,function(){var a=MathLib.matrix([[1,2,-1,-4],[2,3,-1,-11],[-2,0,-3,22]]),b=MathLib.matrix([[1,2,3],[1,2,4],[2,4,7]]);deepEqual(a.rref(),[[1,0,0,-8],[0,1,0,1],[0,0,1,-2]],"reduced row echelon form");deepEqual(b.rref(),[[1,2,0],[0,0,1],[0,0,0]],"singular matrix")});test(".solve()",4,function(){var a=MathLib.matrix([[1,2,3],[1,1,1],[3,3,1]]),b=MathLib.vector([2,2,0]),c=MathLib.vector([5,-6,3]),d=MathLib.matrix([[1,0,3],[2,1,0],[0,0,1]]),e=MathLib.vector([10,3,3]),f=MathLib.vector([1,1,3]),g=MathLib.complex,h=MathLib.matrix([[g([2,3]),0,3],[2,g([-1,5]),0],[g([3,-4]),g([0,1]),1]]),i=MathLib.vector([g([5,37]),g([5,19]),g([21,0])]),j=MathLib.vector([g([4,2]),g([3,0]),g([1,7])]);ok(MathLib.isEqual(a.solve(b),c),"Solving a system of linear equations");deepEqual(a.times(c),b,"Showing the solution is right");deepEqual(d.solve(e),f,"Solving a system of linear equations");ok(MathLib.isEqual(h.solve(i),j),"Solving a complex system of linear equations")});test(".times()",4,function(){var a=MathLib.matrix([[1,2],[3,4]]),b=MathLib.matrix([[0,1],[0,0]]),c=MathLib.matrix([[0,1],[0,3]]),d=MathLib.complex,e=MathLib.matrix([[d([2,3]),0,3],[2,d([-1,5]),0],[d([3,-4]),d([0,1]),1]]),f=MathLib.vector([d([4,2]),3,d([1,7])]),g=MathLib.vector([d([5,37]),d([5,19]),d([21,0])]);deepEqual(a.times(3),MathLib.matrix([[3,6],[9,12]]),"matrix scalar multiplication");deepEqual(a.times(d([0,1])),MathLib.matrix([[d([0,1]),d([0,2])],[d([0,3]),d([0,4])]]),"matrix scalar multiplication");deepEqual(a.times(b),c,"multiplying two simple matrices");deepEqual(e.times(f),g,"complex matrix times complex vector")});test(".trace()",2,function(){var a=MathLib.complex([3,4]),b=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]),c=MathLib.matrix([[1,2],[3,a]]);equals(b.trace(),15,"trace of a simple matrix");deepEqual(c.trace().z,[4,4],"trace of a complex matrix")});test(".transpose()",2,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]),b=MathLib.matrix([[1,2,3],[4,5,6]]);deepEqual(a.transpose(),MathLib.matrix([[1,4,7],[2,5,8],[3,6,9]]),"transpose a square matrix");deepEqual(b.transpose(),MathLib.matrix([[1,4],[2,5],[3,6]]),"transpose of a rectangular matrix")});test(".toArray()",4,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]),b=a.toArray();deepEqual(b,[[1,2,3],[4,5,6],[7,8,9]],".toArray()");equals(Object.prototype.toString.call(b),"[object Array]",".toArray()");equals(b.type,undefined,"get sure that it is not a Mathlib object");b[0][0]=42;deepEqual(a,MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]),"make sure the matrix hasn't changed")});test(".toColVectors()",1,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]);deepEqual(a.toColVectors(),[MathLib.vector([1,4,7]),MathLib.vector([2,5,8]),MathLib.vector([3,6,9])],".toColVectors()")});test(".toComplex()",1,function(){var a=MathLib.matrix([[1,-2],[2,1]]);deepEqual(a.toComplex().z,[1,2],"convert a 2x2 matrix to a complex number")});test(".toContentMathML()",1,function(){var a=MathLib.matrix([[1,2],[3,4]]);deepEqual(a.toContentMathML(),"<matrix><matrixrow><cn>1</cn><cn>2</cn></matrixrow><matrixrow><cn>3</cn><cn>4</cn></matrixrow></matrix>",".toContentMathML()")});test(".toLaTeX()",1,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]);deepEqual(a.toLaTeX(),"\\begin{pmatrix}\n1 & 2 & 3\\\n4 & 5 & 6\\\n7 & 8 & 9\n\\end{pmatrix}",".toLaTeX()")});test(".toMathML()",1,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]);deepEqual(a.toMathML(),"<mrow><mo> ( </mo><mtable><mtr><mtd><mn>1</mn></mtd><mtd><mn>2</mn></mtd><mtd><mn>3</mn></mtd></mtr><mtr><mtd><mn>4</mn></mtd><mtd><mn>5</mn></mtd><mtd><mn>6</mn></mtd></mtr><mtr><mtd><mn>7</mn></mtd><mtd><mn>8</mn></mtd><mtd><mn>9</mn></mtd></mtr></mtable><mo> ) </mo></mrow>",".toMathML()")});test(".toRowVectors()",1,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]);deepEqual(a.toRowVectors(),[MathLib.vector([1,2,3]),MathLib.vector([4,5,6]),MathLib.vector([7,8,9])],".toRowVectors()")});test(".toString()",1,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]);deepEqual(a.toString(),"1\t2\t3\n4\t5\t6\n7\t8\t9",".toString()")});test("constructor",1,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]);equals(a.constructor,MathLib.matrix,"Testing .constructor")});test("identity()",1,function(){equals(MathLib.matrix.identity(4).isIdentity(),!0,"creating a identity matrix")});test("numbers()",3,function(){var a=MathLib.matrix.numbers(3,2,2),b=MathLib.matrix.numbers(4,2),c=MathLib.matrix.numbers(5);deepEqual(a,[[3,3],[3,3]],"static number method");deepEqual(b,[[4,4],[4,4]],"static number method");deepEqual(c,[[5]],"static number method")});test("type",1,function(){var a=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]);equals(a.type,"matrix","Testing .type")});module("Permutation");test("init",1,function(){var a=MathLib.permutation([[0,1],[2,3]]),b=MathLib.permutation([[0,1],[2,3]]);equals(a.type,"permutation","Testing .type")});test(".applyTo()",6,function(){var a=MathLib.permutation([[0,1,2],[0,1,2]]),b=MathLib.permutation([0,2,1]),c=MathLib.permutation([]),d=MathLib.vector([1,2,3]);equals(a.applyTo(0),2,"Testing .applyTo()");equals(a.applyTo(3),3,"Testing .applyTo()");deepEqual(b.applyTo(d),MathLib.vector([1,3,2]),"Testing .applyTo()");equals(b.applyTo(d).type,"vector","Testing .applyTo()");deepEqual(b.applyTo([1,2,3]),[1,3,2],"Testing .applyTo()");equals(c.applyTo(1),1,"Testing .applyTo() with id")});test(".map()",2,function(){var a=MathLib.permutation([1,2,3]),b=MathLib.permutation([2,4,6]),c=function(a){return 2*a},d=a.map(c);deepEqual(d,b,".map()");equals(d.type,"permutation",".type should be permutation")});test(".times()",1,function(){var a=MathLib.permutation([2,0,1]),b=MathLib.permutation([0,2,1]);deepEqual(a.times(b),[2,1,0],"Testing .times()")});test(".sgn()",2,function(){var a=MathLib.permutation([[0,1],[1,2]]),b=MathLib.permutation([[0,1],[1,2,3]]);equals(a.sgn(),1,"Testing .sgn()");equals(b.sgn(),-1,"Testing .sgn()")});test(".toMatrix()",2,function(){var a=MathLib.permutation([[0,1],[2,3]]),b=MathLib.permutation([]),c=MathLib.matrix([[0,1,0,0],[1,0,0,0],[0,0,0,1],[0,0,1,0]]),d=MathLib.matrix([[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]);deepEqual(a.toMatrix(),c,"Testing .toMatrix()");deepEqual(b.toMatrix(4),d,"Testing .toMatrix() with id permutation")});test(".toString()",2,function(){var a=MathLib.permutation([[0,1],[2,3]]),b=MathLib.permutation([]);equals(a.toString(),"(0,1)(2,3)","Testing .toString()");equals(b.toString(),"","Testing .toString() with id permutation")});test(".cycleToList()",2,function(){var a=[[0,1,2],[3,4]],b=[[0,1],[2,3]];deepEqual(MathLib.permutation.cycleToList(a),[1,2,0,4,3],"Testing .cycleToList()");deepEqual(MathLib.permutation.cycleToList(b),[1,0,3,2],"Testing .cycleToList()")});test(".listToCycle()",1,function(){var a=[1,2,0,4,3];deepEqual(MathLib.permutation.listToCycle(a),[[0,1,2],[3,4]],"Testing .listToCycle()")});test("constructor",1,function(){var a=MathLib.permutation([[0,1],[2,3]]);equals(a.constructor,MathLib.permutation,"Testing .constructor")});test("type",1,function(){var a=MathLib.permutation([[0,1],[2,3]]);equals(a.type,"permutation","Testing .type")});module("Point");test("init",1,function(){var a=MathLib.point([3,2,1]);equals(a.dim,2,"Testing the dimension")});test(".isEqual",3,function(){var a=MathLib.point([3,2,1]),b=MathLib.point([6,4,2]),c=MathLib.point([1,1,1]),d=MathLib.point([1,1,1,1]);equals(a.isEqual(b),!0,".isEqual()");equals(a.isEqual(c),!1,".isEqual()");equals(c.isEqual(d),!1,".isEqual()")});test(".isFinite",2,function(){var a=MathLib.point([3,2,1]),b=MathLib.point([6,4,0]);equals(a.isFinite(),!0,".isFinite()");equals(b.isFinite(),!1,".isFinite()")});test(".isInside()",3,function(){var a=MathLib.point([1,0,1]),b=MathLib.point([2,0,1]),c=MathLib.point([3,0,1]),d=MathLib.circle(MathLib.point([0,0,1]),2);equals(a.isInside(d),!0,".isInside()");equals(b.isInside(d),!1,".isInside()");equals(c.isInside(d),!1,".isInside()")});test(".isOn()",3,function(){var a=MathLib.point([1,0,1]),b=MathLib.point([2,0,1]),c=MathLib.point([3,0,1]),d=MathLib.circle(MathLib.point([0,0,1]),2);equals(a.isOn(d),!1,".isOn()");equals(b.isOn(d),!0,".isOn()");equals(c.isOn(d),!1,".isOn()")});test(".isOutside()",3,function(){var a=MathLib.point([1,0,1]),b=MathLib.point([2,0,1]),c=MathLib.point([3,0,1]),d=MathLib.circle(MathLib.point([0,0,1]),2);equals(a.isOutside(d),!1,".isOutside()");equals(b.isOutside(d),!1,".isOutside()");equals(c.isOutside(d),!0,".isOutside()")});test(".map()",2,function(){var a=MathLib.point([1,2,3]),b=MathLib.point([2,4,6]),c=function(a){return 2*a},d=a.map(c);deepEqual(d,b,".map()");equals(d.type,"point",".type should be point")});test(".reflectAt()",1,function(){var a=MathLib.point([0,0,1]),b=MathLib.point([1,2,1]),c=MathLib.point([2,4,1]);deepEqual(a.reflectAt(b),c,".reflectAt()")});test(".toLaTeX",2,function(){var a=MathLib.point([3,2,1]);equals(a.toLaTeX(),"\\begin{pmatrix}\n\t3\\\\\n\t2\n\\end{pmatrix}",".toLaTeX()");equals(a.toLaTeX(!0),"\\begin{pmatrix}\n\t3\\\\\n\t2\\\\\n\t1\n\\end{pmatrix}",".toLaTeX()")});test(".toMathML",2,function(){var a=MathLib.point([3,2,1]);equals(a.toMathML(),"<mrow><mo>(</mo><mtable><mtr><mtd><mn>3</mn></mtd></mtr><mtr><mtd><mn>2</mn></mtd></mtr></mtable><mo>)</mo></mrow>",".toMathML()");equals(a.toMathML(!0),"<mrow><mo>(</mo><mtable><mtr><mtd><mn>3</mn></mtd></mtr><mtr><mtd><mn>2</mn></mtd></mtr><mtr><mtd><mn>1</mn></mtd></mtr></mtable><mo>)</mo></mrow>",".toMathML()")});test(".toString",2,function(){var a=MathLib.point([3,2,1]);equals(a.toString(),"(3, 2)",".toString()");equals(a.toString(!0),"(3, 2, 1)",".toString()")});test("constructor",1,function(){var a=MathLib.point([3,2,1]);equals(a.constructor,MathLib.point,"Testing .constructor")});test("type",1,function(){var a=MathLib.point([3,2,1]);equals(a.type,"point","Testing .type")});module("Polynomial");test("init",2,function(){var a=MathLib.polynomial([1,2,3,4]),b=MathLib.polynomial([1,-4,MathLib.complex([2,3])]);deepEqual(a,[1,2,3,4],".coef");deepEqual(b[2],MathLib.complex([2,3]),".coef")});test("properties",2,function(){var a=MathLib.polynomial(3);equals(a.deg,3,"testing if .degree is right");deepEqual(a,[0,0,0,1],".coef")});test(".differentiate()",3,function(){var a=MathLib.polynomial(3);deepEqual(a.differentiate(),[0,0,3],".differentiate()");deepEqual(a.differentiate(2),[0,6],".differentiate(2)");deepEqual(a.differentiate(4),[0],".differentiate(4)")});test(".integrate()",2,function(){var a=MathLib.polynomial([0,0,0,1]);deepEqual(a.integrate(),[0,0,0,0,.25],".integrate()");deepEqual(a.integrate(2),[0,0,0,0,0,.05],".integrate(2)")});test(".isEqual()",1,function()
{var a=MathLib.complex([0,0]),b=MathLib.polynomial(3),c=MathLib.polynomial([a,0,0,1]);equals(c.isEqual(b),!0,".times(polynomial)")});test(".map()",2,function(){var a=MathLib.polynomial([1,2,3]),b=MathLib.polynomial([2,4,6]),c=function(a){return 2*a},d=a.map(c);deepEqual(d,b,".map()");equals(d.type,"polynomial",".type should be polynomial")});test(".mod()",1,function(){var a=MathLib.complex([5,6]),b=MathLib.complex([2,0]),c=MathLib.polynomial([3,a,-2,0,4,5]),d=MathLib.polynomial([0,b,1,0,1,2]);equals(c.mod(3).isEqual(d),!0,".mod()")});test(".plus()",4,function(){var a=MathLib.polynomial(3),b=MathLib.polynomial([1,2,3]);deepEqual(b.plus(12),[13,2,3],".plus(integer)");deepEqual(b.plus(12,!0),[13,14,15],".plus(integer, true)");deepEqual(a.plus(b),[1,2,3,1],".plus(polynomial)");deepEqual(b.plus(a),[1,2,3,1],".plus(polynomial)")});test(".times()",3,function(){var a=MathLib.polynomial(3),b=MathLib.polynomial([1,2,3]);deepEqual(b.times(5),[5,10,15],".times(integer)");deepEqual(a.times(b),[0,0,0,1,2,3],".times(polynomial)");deepEqual(b.times(a),[0,0,0,1,2,3],".times(polynomial)")});test(".toContentMathML()",2,function(){var a=MathLib.polynomial([1,2,3]),b=MathLib.polynomial([-1,0,1]);deepEqual(a.toContentMathML(),"<apply><plus/><cn>1</cn><apply><times/><cn>2</cn><ci>x</ci></apply><apply><times/><cn>3</cn><apply><power/><ci>x</ci><cn>2</cn></apply></apply></apply>",".toContentMathML()");deepEqual(b.toContentMathML(),"<apply><plus/><cn>-1</cn><apply><times/><cn>1</cn><apply><power/><ci>x</ci><cn>2</cn></apply></apply></apply>",".toContentMathML()")});test(".toLaTeX()",2,function(){var a=MathLib.polynomial([1,2,3]),b=MathLib.polynomial([-1,0,1]);deepEqual(a.toLaTeX(),"1+2x+3x^{2}",".toLaTeX()");deepEqual(b.toLaTeX(),"-1+1x^{2}",".toLaTeX()")});test(".toMathML()",2,function(){var a=MathLib.polynomial([1,2,3]),b=MathLib.polynomial([-1,0,1]);deepEqual(a.toMathML(),"<mrow><mn>1</mn><mo>+</mo><mn>2</mn><mo>&#x2062;</mo><mi>x</mi><mo>+</mo><mn>3</mn><mo>&#x2062;</mo><msup><mi>x</mi><mn>2</mn></msup></mrow>",".toMathML()");deepEqual(b.toMathML(),"<mrow><mo>-</mo><mn>1</mn><mo>+</mo><mn>1</mn><mo>&#x2062;</mo><msup><mi>x</mi><mn>2</mn></msup></mrow>",".toMathML()")});test(".toString()",2,function(){var a=MathLib.polynomial([1,2,3]),b=MathLib.polynomial([-1,0,1]);deepEqual(a.toString(),"1+2*x+3*x^2",".toString()");deepEqual(b.toString(),"-1+1*x^2",".toString()")});test(".valueAt()",6,function(){var a=MathLib.polynomial(3),b=MathLib.polynomial([1,2,3]),c=MathLib.polynomial([1,-4,MathLib.complex([4,-1])]),d=MathLib.matrix([[1,0,1],[2,2,1],[4,2,1]]),e=MathLib.polynomial([4,-1,-4,1]);equals(a.valueAt(4),64,".valueAt()");equals(b.valueAt(2),17,".valueAt()");deepEqual(b.valueAt(MathLib.complex([2,3])).z,[-10,42],".valueAt()");deepEqual(c.valueAt(2).z,[9,-4],".valueAt()");deepEqual(c.valueAt(MathLib.complex([2,3])).z,[-15,41],".valueAt()");equals(e.valueAt(d).isZero(),!0,"Cayley–Hamilton theorem")});test("constructor",1,function(){var a=MathLib.polynomial([1,2,3]);equals(a.constructor,MathLib.polynomial,"Testing .constructor")});test("one",1,function(){var a=MathLib.polynomial.one;deepEqual(a,MathLib.polynomial([1]),"Testing .one")});test("type",1,function(){var a=MathLib.polynomial([1,2,3]);equals(a.type,"polynomial","Testing .type")});test("zero",1,function(){var a=MathLib.polynomial.zero;deepEqual(a,MathLib.polynomial([0]),"Testing .zero")});module("Set");test("init",4,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=MathLib.set([3,3,4,9,2,8,2],!0);equals(a.card,5,"Testing the cardinality");equals(a.multiset,!1,"Testing .multiset");equals(b.card,7,"Testing the cardinality");equals(b.multiset,!0,"Testing .multiset")});test(".and()",1,function(){var a=MathLib.set([1,2,3,4]),b=MathLib.set([1,3,5,7]);deepEqual(a.and(b),[1,3],"Testing .and() (set)")});test(".arithMean()",2,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=MathLib.set([3,3,4,9,2,8,2],!0);equals(a.arithMean(),5.2,"Testing .arithMean() (set)");equals(b.arithMean(),31/7,"Testing .arithMean() (multiset)")});test(".compare()",3,function(){var a=MathLib.set([1,2,3,4]),b=MathLib.set([1,3,5,7]),c=MathLib.set([1,2,3,4,5]);deepEqual(a.compare(a),0,".compare()");deepEqual(a.compare(b),-1,".compare()");deepEqual(b.compare(c),-1,".compare()")});test(".geoMean()",2,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=MathLib.set([3,3,4,9,2,8,2],!0);equals(a.geoMean(),Math.pow(1728,.2),"Testing .geoMean() (set)");equals(b.geoMean(),Math.pow(10368,1/7),"Testing .geoMean() (multiset)")});test(".harmonicMean()",2,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=MathLib.set([3,3,4,9,2,8,2],!0);equals(a.harmonicMean(),3.7894736842105265,"Testing .geoMean() (set)");equals(b.harmonicMean(),3.2516129032258068,"Testing .geoMean() (multiset)")});test(".insert()",8,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=MathLib.set([3,3,4,9,2,8,2],!0);deepEqual(a.insert(1),[1,2,3,4,8,9],"Testing .locate() (set, front)");deepEqual(a.insert(3),[1,2,3,4,8,9],"Testing .locate() (set, existing)");deepEqual(a.insert(5),[1,2,3,4,5,8,9],"Testing .locate() (set, not existing)");deepEqual(a.insert(10),[1,2,3,4,5,8,9,10],"Testing .locate() (set, back)");deepEqual(b.insert(1),[1,2,2,3,3,4,8,9],"Testing .locate() (multiset, front)");deepEqual(b.insert(3),[1,2,2,3,3,3,4,8,9],"Testing .locate() (multiset, existing)");deepEqual(b.insert(5),[1,2,2,3,3,3,4,5,8,9],"Testing .locate() (multiset, not existing)");deepEqual(b.insert(10),[1,2,2,3,3,3,4,5,8,9,10],"Testing .locate() (multiset, back)")});test(".isEmpty()",3,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=MathLib.set(),c=MathLib.set([]);equals(a.isEmpty(),!1,"Testing .min()");equals(b.isEmpty(),!0,"Testing .min(3)");equals(c.isEmpty(),!0,"Testing .min(3)")});test(".isEqual()",3,function(){var a=MathLib.set([1,2,3,4]),b=MathLib.set([1,3,5,7]),c=MathLib.set([1,2,MathLib.complex([3,0]),4]);deepEqual(a.isEqual(a),!0,".isEqual()");deepEqual(a.isEqual(b),!1,".isEqual()");deepEqual(a.isEqual(c),!1,".isEqual()")});test(".isSubsetOf()",2,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=MathLib.set([3,8,2]),c=MathLib.set([5,8,2]);equals(b.isSubsetOf(a),!0,"Testing .isSubsetOf()");equals(c.isSubsetOf(a),!1,"Testing .isSubsetOf()")});test(".locate()",4,function(){var a=MathLib.set([3,3,4,9,2,8,2]);equals(a.locate(1),0,"Testing .locate()");equals(a.locate(3),1,"Testing .locate()");equals(a.locate(5),3,"Testing .locate()");equals(a.locate(10),5,"Testing .locate()")});test(".map()",2,function(){var a=MathLib.set([1,2,3]),b=MathLib.set([2,4,6]),c=function(a){return 2*a},d=a.map(c);deepEqual(d,b,".map()");equals(d.type,"set",".type should be set")});test(".max()",4,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=MathLib.set([3,3,4,9,2,8,2],!0);equals(a.max(),9,"Testing .max() (set)");equals(a.max(3),4,"Testing .max(3) (set)");equals(b.max(),9,"Testing .max() (multiset)");equals(b.max(3),4,"Testing .max(3) (multiset)")});test(".min()",4,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=MathLib.set([3,3,4,9,2,8,2],!0);equals(a.min(),2,"Testing .min() (set)");equals(a.min(3),4,"Testing .min(3) (set)");equals(b.min(),2,"Testing .min() (multiset)");equals(b.min(3),3,"Testing .min(3) (multiset)")});test(".or()",1,function(){var a=MathLib.set([1,2,3,4]),b=MathLib.set([1,3,5,7]);deepEqual(a.or(b),[1,2,3,4,5,7],"Testing .or() (set)")});test(".plus()",3,function(){var a=MathLib.set([1,2,3,4]),b=MathLib.set([1,2,3,4,5,6]);equals(a.plus(),10,"Testing .plus() (set)");deepEqual(a.plus(2),[3,4,5,6],"Testing .plus(int) (set)");deepEqual(a.plus(b),[2,3,4,5,6,7,8,9,10],"Testing .plus(set) (set)")});test(".powerset()",1,function(){var a=MathLib.set,b=MathLib.set([1,2,3]),c=MathLib.set([a(),a([1]),a([2]),a([3]),a([1,2]),a([1,3]),a([2,3]),a([1,2,3])]);deepEqual(b.powerset(),c,".powerset()")});test(".remove()",1,function(){var a=MathLib.set([3,3,4,9,2,8,2]);deepEqual(a.remove(3),[2,4,8,9],"Testing .toArray()")});test(".times()",2,function(){var a=MathLib.set([1,2,3,4]);equals(a.times(),24,"Testing .times() (set)");deepEqual(a.times(2),[2,4,6,8],"Testing .times(int) (set)")});test(".toArray()",3,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=MathLib.set([3,3,4,9,2,8,2],!0),c=MathLib.set();deepEqual(a.toArray(),[2,3,4,8,9],"Testing .toArray() (set)");deepEqual(b.toArray(),[2,2,3,3,4,8,9],"Testing .toArray() (multiset)");deepEqual(c.toArray(),[],"Testing .toArray() (empty set)")});test(".toContentMathML()",3,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=MathLib.set([3,3,4,9,2,8,2],!0),c=MathLib.set();equals(a.toContentMathML(),"<set><cn>2</cn><cn>3</cn><cn>4</cn><cn>8</cn><cn>9</cn></set>","Testing .toContentMathML() (set)");equals(b.toContentMathML(),"<set><cn>2</cn><cn>2</cn><cn>3</cn><cn>3</cn><cn>4</cn><cn>8</cn><cn>9</cn></set>","Testing .toContentMathML() (multiset)");equals(c.toContentMathML(),"<emptyset/>","Testing .toContentMathML() (empty set)")});test(".toLaTeX()",3,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=MathLib.set([3,3,4,9,2,8,2],!0),c=MathLib.set();equals(a.toLaTeX(),"\\{2, 3, 4, 8, 9\\}","Testing .toLaTeX() (set)");equals(b.toLaTeX(),"\\{2, 2, 3, 3, 4, 8, 9\\}","Testing .toLaTeX() (multiset)");equals(c.toLaTeX(),"\\emptyset","Testing .toLaTeX() (empty set)")});test(".toMathML()",3,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=MathLib.set([3,3,4,9,2,8,2],!0),c=MathLib.set();equals(a.toMathML(),"<mrow><mo>{</mo><mn>2</mn><mo>,</mo><mn>3</mn><mo>,</mo><mn>4</mn><mo>,</mo><mn>8</mn><mo>,</mo><mn>9</mn><mo>}</mo></mrow>","Testing .toMathML() (set)");equals(b.toMathML(),"<mrow><mo>{</mo><mn>2</mn><mo>,</mo><mn>2</mn><mo>,</mo><mn>3</mn><mo>,</mo><mn>3</mn><mo>,</mo><mn>4</mn><mo>,</mo><mn>8</mn><mo>,</mo><mn>9</mn><mo>}</mo></mrow>","Testing .toMathML() (multiset)");equals(c.toMathML(),"<mi>&#x2205;</mi>","Testing .toMathML() (empty set)")});test(".toMultiset()",2,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=a.toMultiset();deepEqual(b.toArray(),[2,3,4,8,9],"Testing .toArray()");equals(b.multiset,!0,"Testing .multiset")});test(".toSet()",2,function(){var a=MathLib.set([3,3,4,9,2,8,2],!0),b=a.toSet();deepEqual(b.toArray(),[2,3,4,8,9],"Testing .toArray()");equals(b.multiset,!1,"Testing .multiset")});test(".toString()",3,function(){var a=MathLib.set([3,3,4,9,2,8,2]),b=MathLib.set(),c=MathLib.set([3,3,4,9,2,8,2],!0);equals(a.toString(),"(2, 3, 4, 8, 9)","Testing .toString() (set)");equals(b.toString(),"∅","Testing .toString() (empty set)");equals(c.toString(),"(2, 2, 3, 3, 4, 8, 9)","Testing .toString() (multiset)")});test(".without()",1,function(){var a=MathLib.set([1,2,3,4]),b=MathLib.set([1,3,5,7]);deepEqual(a.without(b),[2,4],"Testing .without() (set)")});test(".xor()",1,function(){var a=MathLib.set([1,2,3,4]),b=MathLib.set([1,3,5,7]);deepEqual(a.xor(b),[2,4,5,7],"Testing .xor() (set)")});test("fromTo()",1,function(){deepEqual(MathLib.set.fromTo(1,5,2),[1,3,5],"Testing MathLib.set.fromTo()")});test("constructor",1,function(){var a=MathLib.set([1,2,3,4]);equals(a.constructor,MathLib.set,"Testing .constructor")});test("type",1,function(){var a=MathLib.set([1,2,3,4]);equals(a.type,"set","Testing .type")});module("Vector");test("init",2,function(){var a=MathLib.vector([1,2,3]);equals(a.dim,3,"Testing the dimension");deepEqual(a,[1,2,3],"checking the entries")});test(".dyadicProduct()",1,function(){var a=MathLib.vector([1,2,3]),b=MathLib.vector([2,4,6]);deepEqual(a.dyadicProduct(b),[[2,4,6],[4,8,12],[6,12,18]],".dyadicProduct()")});test(".isEqual()",3,function(){var a=MathLib.vector([0,1,2]),b=MathLib.vector([0,1,2]),c=MathLib.vector([0,0,0]),d=MathLib.vector([0,0,0,0]);equals(a.isEqual(b),!0,".isEqual()");equals(a.isEqual(c),!1,".isEqual()");equals(c.isEqual(d),!1,".isEqual()")});test(".isZero()",2,function(){var a=MathLib.vector([0,0,0]),b=MathLib.vector([0,0,1]);equals(a.isZero(),!0,".isZero()");equals(b.isZero(),!1,".isZero()")});test(".map()",2,function(){var a=MathLib.vector([1,2,3]),b=MathLib.vector([2,4,6]),c=function(a){return 2*a},d=a.map(c);deepEqual(d,b,".map()");equals(d.type,"vector",".type should be vector")});test(".scalarproduct()",1,function(){var a=MathLib.vector([3,1,4]),b=MathLib.vector([1,5,9]);equals(a.scalarproduct(b),44,".scalarproduct()")});test(".size()",1,function(){var a=MathLib.vector([1,2,3]);equals(a.size(),Math.sqrt(14),".size()")});test(".times()",2,function(){var a=MathLib.vector([1,2,3]),b=MathLib.matrix([[1,2,3],[4,5,6],[7,8,9]]);deepEqual(a.times(3),MathLib.vector([3,6,9]),".times(number)");deepEqual(a.times(b),MathLib.vector([30,36,42]),".times(matrix)")});test(".toContentMathML()",1,function(){var a=MathLib.vector([1,2,3]);equals(a.toContentMathML(),"<vector><cn>1</cn><cn>2</cn><cn>3</cn></vector>",".toContentMathML()")});test(".toLaTeX()",1,function(){var a=MathLib.vector([1,2,3]);equals(a.toLaTeX(),"\\begin{pmatrix}\n\t1\\\\\n\t2\\\\\n\t3\n\\end{pmatrix}")});test(".toMathML()",1,function(){var a=MathLib.vector([1,2,3]);equals(a.toMathML(),"<mrow><mo>(</mo><mtable><mtr><mtd><mn>1</mn></mtd></mtr><mtr><mtd><mn>2</mn></mtd></mtr><mtr><mtd><mn>3</mn></mtd></mtr></mtable><mo>)</mo></mrow>",".toMathML()")});test(".toString()",1,function(){var a=MathLib.vector([1,2,3]);equals(a.toString(),"(1, 2, 3)",".toString()")});test(".vectorproduct()",1,function(){var a=MathLib.vector([1,2,3]),b=MathLib.vector([-7,8,9]);deepEqual(a.vectorproduct(b),[-6,-30,22],".vectorProduct()")});test("constructor",1,function(){var a=MathLib.vector([1,2,3]);equals(a.constructor,MathLib.vector,"Testing .constructor")});test("type",1,function(){var a=MathLib.vector([1,2,3]);equals(a.type,"vector","Testing .type")});test("zero",1,function(){var a=MathLib.vector.zero(3);equals(a.isZero(),!0,"testing zero vector")});